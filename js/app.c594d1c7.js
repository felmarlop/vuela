(function(e){function t(t){for(var n,s,o=t[0],l=t[1],A=t[2],c=0,u=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&u.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,A||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,o=1;o<i.length;o++){var l=i[o];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},r={app:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vuela/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var A=0;A<o.length;A++)t(o[A]);var d=l;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"54a4":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v(" The user is "+e._s(e.$route.params.name)+" "),i("router-view")],1)},r=[]},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"app"},[n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{alt:"Vue logo",src:i("cf05")}}),n("h2",{staticClass:"mt-2"},[e._v(e._s(e.msg))])]),n("Birds"),n("div",{staticClass:"footer"},[n("a",{staticClass:"bigml_link",attrs:{href:e.bigmlUrl,target:"_blank"}},[n("span")])])],1)},r=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"birds_wrapper mt-6 mb-6"},[i("v-text-field",{style:{margin:"0 auto",width:"50%"},attrs:{label:"BigML composite hash",outlined:"",readonly:""},on:{change:function(t){return e.listBirds()}},model:{value:e.hash,callback:function(t){e.hash=t},expression:"hash"}}),e.birds.length?i("transition-group",{staticClass:"birds",attrs:{name:"image-list",appear:""}},e._l(e.birds,(function(t,n){return i("bird",{key:"grid_"+t.url,attrs:{bird:t,bindex:n},on:{"open-modal":e.openModal}})})),1):e._e(),!e.birds.length&&e.loadingMsg?i("div",{staticClass:"loading"},[e._v(e._s(e.loadingMsg))]):e._e(),i("idialog",{ref:"idialog",attrs:{dialog:e.dialog,"region-events":e.regionEvents,bird:e.selectedBird,"bird-index":e.birdIndex,"bird-length":e.birds.length,labels:e.labels},on:{"set-bird":e.setBird,"update-bird":e.updateBird,"close-modal":e.closeModal,"update-labels":e.updateLabels}}),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.birds.length,expression:"birds.length"}],on:{click:function(t){return e.shuffle(!0)}}},[e._v("Shuffle")])],1)},s=[],o=(i("b64b"),i("c975"),i("4795"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"image_wrapper"},[i("div",{staticClass:"zoom_wrapper"},[i("transition",{attrs:{name:"image-fade"},on:{afterEnter:e.init}},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.isLoaded,expression:"isLoaded"}],style:e.imgStyle,attrs:{src:e.birdUrl},on:{load:e.loaded,error:e.error,click:function(t){return e.openModal(!1)}}})]),!e.expanded&&e.isLoaded?i("v-btn",{style:e.editStyle,attrs:{icon:"",dark:"",small:""},on:{click:function(t){return e.openModal(!0)}}},[i("v-icon",[e._v("mdi-pencil")])],1):e._e()],1),e.isError?i("div",{staticClass:"loading"},[e._v("Error happened loading the image...")]):i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoaded,expression:"!isLoaded"}],staticClass:"loading"},[e._v("Loading...")])])}),l=[],A=(i("acd8"),i("a434"),i("a9e3"),i("e25e"),i("fb6a"),i("5319"),i("ac1f"),i("5698"));A["g"].prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var d=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94","#f7b6d2","#c7c7c7","#dbdb8d","#9edae5","#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6","#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],c=i("2ef0"),u=i.n(c),h=1,g=8,f=.01,b=40,m=null;function p(e,t,i){if(i.editingMode){var n=t.data()[0],r=parseFloat(e.x)-parseFloat(e.subject.x||e.x)+parseFloat(t.attr("x")),a=parseFloat(e.y)-parseFloat(e.subject.y||e.y)+parseFloat(t.attr("y")),s=n[3]-n[1],o=n[4]-n[2];r<0&&(r=0),a<0&&(a=0);var l=parseFloat(t.attr("width")),A=parseFloat(t.attr("height"));r+l>i.imgWidth&&(r=i.imgWidth-l),a+A>i.imgHeight&&(a=i.imgHeight-A),t.attr("x",r).attr("y",a).data([[n[0],r,a,r+s,a+o]]),e.subject["x"]=e.x,e.subject["y"]=e.y,y(t,i)}}function v(e,t,i){var n,r,a,s,o,l,d,c,u,h,g,f,b=i.img,m=b.parentElement,p=1;if(f=A["e"](t),n=m.querySelectorAll('rect.region[index="'+f.attr("index")+'"]')[0],r=A["e"](n),s=parseFloat(e.x)-parseFloat(e.subject.x),o=parseFloat(e.y)-parseFloat(e.subject.y),h=parseFloat(r.attr("width")),g=parseFloat(r.attr("height")),f.classed("top_left"))l=s+parseFloat(r.attr("x")),d=o+parseFloat(r.attr("y")),l<0&&(l=0,s=0),d<0&&(d=0,o=0),c=h-s,u=g-o;else if(f.classed("bottom_right"))l=parseFloat(r.attr("x")),d=parseFloat(r.attr("y")),c=h+s,u=g+o;else if(f.classed("bottom_left"))l=s+parseFloat(r.attr("x")),d=parseFloat(r.attr("y")),l<0&&(l=0,s=0),c=h-s,u=g+o;else{if(!f.classed("top_right"))return;l=parseFloat(r.attr("x")),d=o+parseFloat(r.attr("y")),d<0&&(d=0,o=0),c=h+s,u=g-o}c<p&&(c=p,l=parseFloat(r.attr("x"))),u<p&&(u=p,d=parseFloat(r.attr("y"))),l+c>i.imgWidth&&(c=i.imgWidth-l),d+u>i.imgHeight&&(u=i.imgHeight-d),r.attr("x",l).attr("y",d).attr("width",c).attr("height",u),a=r.data()[0][0],r.data([[a,l,d,l+c,d+u]]),e.subject["x"]=e.x,e.subject["y"]=e.y,y(r,i)}function y(e,t){var i,n,r=t.img,a=r.parentElement,s=e.attr("index"),o=e.data()[0],l=a.querySelectorAll('text.region_label[index="'+s+'"]')[0],d=18,c=5,u=3,h=5,g=4,f=13,b=0,m=8,p=15;A["e"](l).attr("x",(function(){return parseFloat(o[1])+c})).attr("y",(function(){return i=parseFloat(o[2])-c-h,i<f&&(i=f),i})).style("display","block").style("opacity",(function(){return o&&o[0]?1:0})).text((function(e){return e[0]||""})),A["e"](a.querySelectorAll('rect.region_label_background[index="'+s+'"]')[0]).attr("rx",u).attr("ry",u).attr("x",(function(){return parseFloat(o[1])})).attr("y",(function(){return i=parseFloat(o[2])-d-h,i<b&&(i=b),i})).attr("width",(function(){return l.getComputedTextLength()+2*c})).attr("height",d).style("display",(function(){var e=t.showLabels;return t.showRegions||(e=e&&-1==t.hiddenLabels.indexOf(o[0])),e?"block":"none"})).transition().style("opacity",(function(){return o&&o[0]?1:0})),A["e"](l).style("display",(function(){var e=t.showLabels;return t.showRegions||(e=e&&-1==t.hiddenLabels.indexOf(o[0])),e?"block":"none"})),e.style("display",(function(){return-1==t.hiddenLabels.indexOf(o[0])?"block":"none"})),A["e"](a.querySelectorAll('.delete_region_wrapper[index="'+s+'"]')[0]).attr("x",(function(){return n=parseFloat(o[3])+g,n+p>=t.imgWidth&&(n=t.imgWidth-p),n})).attr("y",(function(){return parseFloat(o[2])})).attr("width",p).attr("height",p).style("display",(function(){return-1==t.hiddenLabels.indexOf(o[0])?"block":"none"})),A["e"](a.querySelectorAll('rect.top_left[index="'+s+'"]')[0]).attr("x",(function(){return o[1]-m/2})).attr("y",(function(){return o[2]-m/2})).attr("width",m).attr("height",m),A["e"](a.querySelectorAll('rect.top_right[index="'+s+'"]')[0]).attr("x",(function(){return parseFloat(o[3]-m/2)})).attr("y",(function(){return o[2]-m/2})).attr("width",m).attr("height",m),A["e"](a.querySelectorAll('rect.bottom_right[index="'+s+'"]')[0]).attr("x",(function(){return parseFloat(o[3]-m/2)})).attr("y",(function(){return parseFloat(o[4]-m/2)})).attr("width",m).attr("height",m),A["e"](a.querySelectorAll('rect.bottom_left[index="'+s+'"]')[0]).attr("x",(function(){return o[1]-m/2})).attr("y",(function(){return parseFloat(o[4]-m/2)})).attr("width",m).attr("height",m),A["f"](a.querySelectorAll('rect.resize[index="'+s+'"]')).style("display",(function(){return-1==t.hiddenLabels.indexOf(o[0])?"block":"none"})),t.editingMode?(A["f"]("rect.region,rect.resize").moveToFront(),A["f"]("rect.region").each((function(){s=A["e"](this).attr("index"),A["e"](a.querySelectorAll('rect.region_label_background[index="'+s+'"]')[0]).moveToFront(),A["e"](a.querySelectorAll('text.region_label[index="'+s+'"]')[0]).moveToFront()})),A["f"](".delete_region_wrapper").moveToFront()):A["e"]("rect.adding").empty()?(A["e"]("rect.overlay").moveToFront(),A["f"]("rect.region").each((function(){s=A["e"](this).attr("index"),A["e"](a.querySelectorAll('rect.region_label_background[index="'+s+'"]')[0]).moveToFront(),A["e"](a.querySelectorAll('text.region_label[index="'+s+'"]')[0]).moveToFront()}))):(A["e"]("rect.adding").empty()||A["e"]("rect.adding").moveToFront(),A["e"]("rect.overlay").moveToFront())}function w(e){var t=u.a.cloneDeep(e.bird),i=e.getRegions();t.regions=i,e.$emit("update-bird",t)}function x(e,t){return A["h"]().scaleExtent([f,g]).on("zoom",(function(i){var n=i.sourceEvent&&"wheel"==i.sourceEvent["type"],r=i.sourceEvent&&"mousemove"==i.sourceEvent["type"],a=i.transform,s=a["k"],o=n?e.transform["x"]:a["x"],l=n?e.transform["y"]:a["y"];A["e"]("rect.region.adding").empty()&&(m=null),e.transform={k:s,x:o,y:l},e.$emit("set-zoom",s),A["e"](t).transition().duration(n||r?0:200).style("transform","translate("+o+"px,"+l+"px) scale("+s+")"),A["e"](t.parentElement).style("cursor","all-scroll"),A["e"]("rect.overlay").style("cursor","all-scroll")})).on("end",(function(i){if(A["e"](t.parentElement).style("cursor","default"),!e.regionEvents)return A["e"]("rect.overlay").style("cursor","default"),!1;if(e.unclickLabels(),A["e"]("rect.overlay").style("cursor","crosshair"),m){if(e.$emit("set-editing",!1),e.hiddenLabels.length){var n=u.a.cloneDeep(e.hiddenLabels),r=n.indexOf(e.selectedLabel);r>=0&&(n.splice(r,1),e.$emit("update-hidden-labels",n))}else e.$emit("set-show-regions",!0);e.addNewRegion()}i.sourceEvent&&A["e"](t.parentElement).call(x(e,t).transform,A["i"].translate(e.transform["x"],e.transform["y"]).scale(e.transform["k"]))}))}function _(e){return{x:A["c"]().domain([0,e.imgWidth]).range([0,e.img.naturalWidth]).interpolate(A["b"]),y:A["c"]().domain([0,e.imgHeight]).range([0,e.img.naturalHeight]).interpolate(A["b"])}}function k(e){return{x:A["c"]().domain([0,e.img.naturalWidth]).range([0,e.imgWidth]),y:A["c"]().domain([0,e.img.naturalHeight]).range([0,e.imgHeight])}}var L={name:"Bird",props:{bird:{type:Object,default:null},bindex:{type:Number,default:0},imgStyle:{type:Object,default:null},zoom:{type:Number,default:h},labels:{type:Array,default:function(){return[]}},hiddenLabels:{type:Array,default:function(){return[]}},selectedLabel:{type:String,default:""},regionEvents:{type:Boolean,default:!0},showLabels:{type:Boolean,default:!1},showRegions:{type:Boolean,default:!1},editingMode:{type:Boolean,default:!1},raw:Boolean,expanded:Boolean},data:function(){return{img:null,imgWidth:0,imgHeight:0,isLoaded:!1,isError:!1,transform:{k:h,x:0,y:0}}},computed:{editStyle:function(){return{backgroundColor:"rgba(0,0,0,.38)",float:"right",position:"relative",bottom:"32px",right:"4px"}},actualSize:function(){if(!this.isLoaded||!this.img)return null;var e=parseInt(window.getComputedStyle(this.img).getPropertyValue("max-height")),t=parseFloat(e/this.img.naturalHeight*this.img.naturalWidth),i=this.img.naturalWidth/t;return i<f&&(i=f),i>g&&(i=g),i},labelSet:function(){return this.labels.slice()},birdUrl:function(){return this.raw?this.bird.url.replace("image","image/raw"):this.bird.url}},watch:{zoom:function(e){if(!this.img)return!1;("number"!==typeof e||e<f)&&(e=f),e>g&&(e=g);var t=this.img.parentElement;A["e"](t.parentElement).call(x(this,t).transform,A["i"].translate(this.transform["x"],this.transform["y"]).scale(e))},hiddenLabels:function(){var e=this;e.showRegions||A["f"]("rect.region").each((function(){y(A["e"](this),e)}))},showLabels:function(e){e?this.displayLabels():this.hideLabels()},showRegions:function(e){e?this.displayAllRegions():this.hideAllRegions()},editingMode:function(e){e?this.enableEditingMode(!0):this.disableEditingMode()}},mounted:function(){var e=this,t=window.innerWidth;window.addEventListener("resize",(function(){window.innerWidth!=t&&e.isLoaded&&(A["f"]("svg").remove(),e.init(e.img)),t=window.innerWidth}),!1)},methods:{openModal:function(e){if(this.expanded)return!1;this.$emit("open-modal",this.bird,this.bindex,e)},loaded:function(){this.isLoaded=!0,this.$emit("image-loaded")},error:function(){this.isError=!0},init:function(e){var t=this;if(t.img=e,t.transform={k:h,x:0,y:0},this.$emit("set-zoom",h),A["f"]("svg").remove(),!e||!t.expanded)return!1;t.regionEvents||(t.$emit("set-show-labels",!0),t.$emit("set-editing",!1),t.$emit("set-show-regions",!0));var i=parseInt(window.getComputedStyle(e).getPropertyValue("max-height"));this.imgWidth=e.naturalWidth*e.height/e.naturalHeight,this.imgHeight=e.naturalHeight*e.width/e.naturalWidth,this.imgHeight>i&&(this.imgHeight=i);var n=A["e"](e.parentElement).append("svg").attr("id","svg_").attr("class","overlay_wrapper").attr("width",this.imgWidth).attr("height",this.imgHeight).style("top",e.offsetTop+"px").style("left",(e.width-this.imgWidth)/2+"px").append("g").attr("id","g_");t.setRegions(t.bird.regions||[],!0,!0),n.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",this.imgHeight).attr("stroke","#FFFFFF").attr("class","cross_line y").style("display","none"),n.append("line").attr("x1",0).attr("y1",0).attr("x2",this.imgWidth).attr("y2",0).attr("stroke","#FFFFFF").attr("class","cross_line x").style("display","none"),n.append("rect").attr("class","overlay").attr("width",this.imgWidth).attr("height",this.imgHeight).style("fill","none").on("mousedown.overlay",(function(e){A["e"]("rect.region.adding").empty()?m=[e.offsetX,e.offsetY]:t.finishRegion()})).on("mousemove.overlay",(function(e){if(!t.regionEvents)return!1;var i=[e.offsetX,e.offsetY];if(A["f"](".cross_line").style("display","block"),A["e"](".cross_line.x").attr("y1",i[1]).attr("y2",i[1]),A["e"](".cross_line.y").attr("x1",i[0]).attr("x2",i[0]),A["e"](this).style("cursor","crosshair"),m){var n=A["e"]("rect.region.adding");i[0]>=m[0]?n.attr("width",i[0]-m[0]):n.attr("x",i[0]).attr("width",m[0]-i[0]),i[1]>=m[1]?n.attr("height",i[1]-m[1]):n.attr("y",i[1]).attr("height",m[1]-i[1])}})).on("mouseout.overlay",(function(){A["f"](".cross_line").style("display","none")})),t.editingMode&&this.enableEditingMode()},setRegions:function(e,t,i){var n,r,a=this,s=A["e"]("#g_"),o=a.img.parentElement,l=[],d=0;i&&(e=this.scaledRegions(e));while(d<e.length)n=e[d],5==n.length&&(l.push(n),n[0]&&-1==this.labelSet.indexOf(n[0])&&this.labelSet.push(n[0])),d++;this.$emit("update-labels",this.labelSet),r=this.getColorFn(this.labelSet);var c=s.selectAll("rect.region").classed("new",!1).data(l);c.enter().append("rect").classed("new",!0).merge(c).attr("index",(function(e,t){return t})).attr("data-label",(function(e){return e[0]||a.selectedLabel})).classed("region",!0).classed("adding",(function(e){return!e[0]})).attr("stroke",(function(e){return r(e[0]||a.selectedLabel)})).attr("fill",(function(e){return r(e[0]||a.selectedLabel)})).attr("stroke-width","2px").attr("fill-opacity",.2).attr("x",(function(e){return(e[1]+e[3])/2})).attr("y",(function(e){return(e[2]+e[4])/2})).style("display",(function(e){return-1==a.hiddenLabels.indexOf(e[0])?"block":"none"})).call(A["a"]().on("drag",(function(e){p(e,A["e"](this),a)})).on("end",(function(){w(a)}))).transition().duration((function(){return t&&A["e"](this).classed("new")&&!A["e"](this).classed("adding")?400:0})).attr("x",(function(e){return e[1]})).attr("y",(function(e){return e[2]})).attr("width",(function(e){return e[3]-e[1]})).attr("height",(function(e){return e[4]-e[2]})).on("end",(function(){A["e"](o.parentElement).call(x(a,o)).on("dblclick.zoom",null),y(A["e"](this),a)})),c.exit().remove();var u=s.selectAll("text.region_label").classed("new",!1).data(l);u.enter().append("text").classed("new",!0).merge(u).attr("index",(function(e,t){return t})).classed("region_label",!0).classed("adding",(function(e){return!e[0]})).on("dblclick",(function(){if(!a.regionEvents)return!1;var e=A["e"](this).attr("index"),t=o.querySelectorAll('rect.region_label_background[index="'+e+'"]');a.unclickLabels(),A["f"](t).classed("clicked",!0),a.$emit("set-alert-message","You are <strong>editing a region label</strong>, type a new label or select one to change it.","info")})).style("font-size","0.98em").style("stroke","rgb(255, 255, 255)").style("color","rgb(255, 255, 255)").style("fill","rgb(255, 255, 255)").style("stroke-width",0).style("opacity",(function(){return A["e"](this).classed("new")?0:1})),u.exit().remove();var h=s.selectAll("rect.region_label_background").classed("new",!1).data(l);h.enter().append("rect").classed("new",!0).merge(h).attr("index",(function(e,t){return t})).classed("region_label_background",!0).classed("adding",(function(e){return!e[0]})).attr("stroke","rgb(255, 255, 255)").attr("stroke-width",1).attr("fill","rgb(0, 0, 0)").on("dblclick",(function(){if(!a.regionEvents)return!1;a.unclickLabels(),A["e"](this).classed("clicked",!0),a.$emit("set-alert-message","You are <strong>editing a region label</strong>, type a new label or select one to change it.","info")})).style("opacity",(function(e){return A["e"](this).classed("new")||!e[0]?0:1})),h.exit().remove(),l.length||A["e"](o.parentElement).call(x(a,o)).on("dblclick.zoom",null)},getRegions:function(){var e=A["f"]("rect.region").data(),t=[],i=_(this),n=0;while(n<e.length)t.push([e[n][0],i.x(e[n][1]),i.y(e[n][2]),i.x(e[n][3]),i.y(e[n][4])]),n++;return t},scaledRegions:function(e){var t=k(this),i=[],n=0;while(n<e.length)i.push([e[n][0],t.x(e[n][1]),t.y(e[n][2]),t.x(e[n][3]),t.y(e[n][4])]),n++;return i},removeAllRegions:function(){A["f"](".delete_region_wrapper,.resize").remove(),this.setRegions([]),w(this)},removeAddingRegion:function(){A["e"]("rect.region.adding").remove(),A["e"]("text.region_label.adding").remove(),A["e"]("rect.region_label_background.adding").remove()},addNewRegion:function(){if(!A["e"]("rect.region.adding").empty()||!m)return!1;if(!this.selectedLabel)return this.$emit("set-alert-message","<strong>Type or select a label first</strong> to draw a region","info"),!1;var e=m[0],t=m[1];if(-1==this.labelSet.indexOf(this.selectedLabel)&&this.labelSet.push(this.selectedLabel),e>this.imgWidth||t>this.imgHeight)return!1;if(A["f"]("rect.region").size()>=b)return this.$emit("set-alert-message","Please, use the BigML API to add <strong>more than "+b+" regions</strong>.","warning"),!1;var i=A["f"]("rect.region").data();i.push(["",e,t,e,t]),this.setRegions(i)},finishRegion:function(){var e=A["e"]("rect.region.adding"),t=A["e"]("text.region_label.adding"),i=A["e"]("rect.region_label_background.adding"),n=[e.attr("data-label")||this.selectedLabel,parseInt(e.attr("x")),parseInt(e.attr("y")),parseInt(e.attr("width"))+parseInt(e.attr("x")),parseInt(e.attr("height"))+parseInt(e.attr("y"))];if(m=null,n[3]==n[1]||n[4]==n[2])return e.remove(),t.remove(),i.remove(),y(e,this),this.$emit("set-alert-message","The region has to have <strong>some width and height</strong>","info"),!1;e.data([n]).classed("adding",!1),t.data([n]).classed("adding",!1),i.data([n]).classed("adding",!1),y(e,this),w(this)},updateClickedLabel:function(e){var t=A["e"]("rect.region_label_background.clicked");if(!this.regionEvents||!e||t.empty())return!1;var i,n,r=this.img.parentElement,a=t.attr("index"),s=A["f"](r.querySelectorAll('rect.region[index="'+a+'"]')),o=A["f"](r.querySelectorAll('text.region_label[index="'+a+'"]')),l=A["f"](r.querySelectorAll('rect.region_label_background[index="'+a+'"]')),d=s.data();d&&d.length&&(n=this.getColorFn(this.labelSet),i=[e,d[0][1],d[0][2],d[0][3],d[0][4]],s.data([i]).attr("fill",(function(){return n(e)})).attr("stroke",(function(){return n(e)})).attr("fill",(function(){return n(e)})),o.data([i]),l.data([i]),y(s,this),w(this)),this.unclickLabels()},unclickLabels:function(){var e=A["f"](".clicked");e.empty()||(e.classed("clicked",!1),this.$emit("hide-alert-message"))},onClickOutside:function(){this.raw&&!A["e"]("rect.region.adding").empty()&&this.finishRegion()},removeRegionByIndex:function(e){var t=this.img.parentElement;A["f"](t.querySelectorAll('[index="'+e+'"]')).remove(),w(this)},removeRegionByLabel:function(e){var t=this.img.parentElement,i=[],n=0;A["f"]("rect.region").each((function(t){5==t.length&&t[0]==e&&i.push(A["e"](this).attr("index"))}));while(n<i.length)A["f"](t.querySelectorAll('[index="'+i[n]+'"]')).remove(),n++;w(this)},removeLastRegion:function(){if(A["f"]("rect.region").empty())return!1;var e=0;A["f"]("rect.region").each((function(){parseInt(A["e"](this).attr("index"))>e&&(e=parseInt(A["e"](this).attr("index")))})),this.removeRegionByIndex(e)},displayLabels:function(){var e=this;A["f"](".region_label,.region_label_background").style("display",(function(t){return e.showRegions||-1==e.hiddenLabels.indexOf(t[0])?"block":"none"}))},hideLabels:function(){A["f"](".region_label,.region_label_background").style("display","none")},displayAllRegions:function(){A["f"]("rect.region").style("display","block"),this.showLabels&&A["f"]("text.region_label,rect.region_label_background").style("display","block"),this.editingMode&&A["f"]("rect.resize,.delete_region_wrapper").style("display","block")},hideAllRegions:function(){A["f"]("text.region_label,rect.region,rect.resize,rect.region_label_background,.delete_region_wrapper").style("display","none")},enableEditingMode:function(e){var t,i=this,n=A["e"]("#g_");n.selectAll("rect.region").each((function(){t=A["e"](this).attr("index"),A["e"](this).moveToFront(),n.append("rect").attr("stroke-width",2).attr("stroke","#333333").attr("fill","white").attr("index",t).classed("resize top_left",!0),n.append("rect").attr("stroke-width",2).attr("stroke","#333333").attr("fill","white").attr("index",t).classed("resize top_right",!0),n.append("rect").attr("stroke-width",2).attr("stroke","#333333").attr("fill","white").attr("index",t).classed("resize bottom_right",!0),n.append("rect").attr("stroke-width",2).attr("stroke","#333333").attr("fill","white").attr("index",t).classed("resize bottom_left",!0),n.append("svg:foreignObject").attr("index",t).attr("class","delete_region_wrapper").on("mousedown",(function(){i.removeRegionByIndex(A["e"](this).attr("index"))})).append("xhtml:i").attr("class","delete_region"),e&&y(A["e"](this),i)})),n.selectAll("rect.resize").call(A["a"]().on("drag",(function(e){v(e,this,i)})).on("end",(function(){w(i)})))},disableEditingMode:function(){var e=A["e"]("#g_");e.select("rect.overlay").moveToFront(),e.selectAll(".region_label_background,.region_label").moveToFront(),e.selectAll("rect.resize,.delete_region_wrapper").remove()},getColorFn:function(e){return A["d"]().range(d).domain(e)},setActualSize:function(){if(!this.isLoaded)return!1;var e=this,t=this.img.parentElement;A["e"](t.parentElement).call(x(e,t).transform,A["i"].translate(e.transform["x"],e.transform["y"]).scale(e.actualSize)),this.$emit("set-zoom",e.actualSize)},resetRegions:function(){A["f"](".delete_region_wrapper,.resize").remove(),this.setRegions(this.bird.regions||[],!0,!0),this.editingMode&&this.enableEditingMode()},resetZoom:function(){if(!this.img)return!1;var e=this.img.parentElement;this.transform={k:h,x:0,y:0},A["e"](e.parentElement).call(x(this,e).transform,A["i"].translate(this.transform["x"],this.transform["y"]).scale(h)),this.$emit("set-zoom",h)}}},C=L,S=i("2877"),M=i("6544"),I=i.n(M),F=i("8336"),E=i("132d"),R=i("269a"),T=i.n(R),z=i("a293"),O=Object(S["a"])(C,o,l,!1,null,null,null),B=O.exports;I()(O,{VBtn:F["a"],VIcon:E["a"]}),T()(O,{ClickOutside:z["a"]});var V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.dialog,fullscreen:"",persistent:"","hide-overlay":"",transition:"dialog-bottom-transition","content-class":"image_dialog"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:"secondary"}},[i("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.closeModal()}}},[i("v-icon",[e._v("mdi-close")])],1),i("v-toolbar-title",[e._v("Image regions")]),i("v-spacer"),i("v-toolbar-items",[i("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){return e.closeModal()}}},[e._v("Close")])],1)],1),e.regionEvents?i("v-subheader",{style:{height:"70px"}},[e._v(" To draw your first region type a label, click the start point on the image, move and click the end point to finish. ")]):e._e(),i("v-alert",{staticClass:"message mt-4",attrs:{dismissible:"",dense:"",type:e.alertMessageType},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[i("span",{domProps:{innerHTML:e._s(e.alertMessage)}})]),i("v-divider"),i("v-row",{attrs:{dense:""}},[i("v-col",{attrs:{md:e.imgLoaded&&e.regionEvents?8:12}},[e.bird?i("bird",{key:e.bird.url,ref:"birdComponent",attrs:{bird:e.bird,raw:!0,"region-events":e.regionEvents,expanded:!0,"img-style":e.imgStyle,zoom:e.zoom,labels:e.labels,"hidden-labels":e.hiddenLabels,"selected-label":e.selectedLabel,"show-labels":e.showLabels,"show-regions":e.showRegions,"editing-mode":e.editingMode},on:{"update-labels":function(t){return e.$emit("update-labels",t)},"update-bird":function(t){return e.$emit("update-bird",t)},"update-hidden-labels":e.updateHiddenLabels,"image-loaded":function(t){e.imgLoaded=!0},"set-alert-message":e.setAlertMessage,"hide-alert-message":function(t){e.alert=!1},"set-zoom":e.setZoom,"set-show-labels":e.setShowLabels,"set-show-regions":e.setShowRegions,"set-editing":e.setEditing}}):e._e(),e.imgLoaded?i("v-pagination",{attrs:{length:e.birdLength,"total-visible":5,color:"secondary"},model:{value:e.imgPage,callback:function(t){e.imgPage=t},expression:"imgPage"}}):e._e(),e.imgLoaded?i("div",{staticClass:"buttons_img"},[i("div",{staticClass:"group_ico"},[i("span",{staticClass:"zoom_value value"},[e._v("Ratio: "+e._s(e.zoom))]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",class:{active:e.actualSizeActive},attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.$refs.birdComponent.setActualSize()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-actual-size")])],1)]}}],null,!1,6620018)},[i("span",[e._v("Actual size (SHIFT+G)")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",class:{active:e.resetZoomActive},attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.$refs.birdComponent.resetZoom()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-reset-zoom")])],1)]}}],null,!1,1605496185)},[i("span",[e._v("Fit window (SHIFT+F)")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.decreaseZoom()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-magnify-minus")])],1)]}}],null,!1,2943131521)},[i("span",[e._v("Zoom out (SHIFT+O)")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.increaseZoom()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-magnify-plus")])],1)]}}],null,!1,226338737)},[i("span",[e._v("Zoom in (SHIFT+I)")])])],1),i("div",{staticClass:"group_ico"},[i("span",{staticClass:"brightness_value value"},[e._v(e._s(e.brightness)+"%")]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.decreaseBrightness()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-brightness-minus")])],1)]}}],null,!1,2362037285)},[i("span",[e._v("Decrease brightness (SHIFT+A)")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.increaseBrightness()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-brightness-plus")])],1)]}}],null,!1,3662323733)},[i("span",[e._v("Increase brightness (SHIFT+S)")])])],1),i("div",{staticClass:"group_ico"},[i("span",{staticClass:"contrast_value value"},[e._v(e._s(e.contrast)+"%")]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.decreaseContrast()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-contrast-minus")])],1)]}}],null,!1,1391011525)},[i("span",[e._v("Increase contrast (SHIFT+X)")])]),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.increaseContrast()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-contrast-plus")])],1)]}}],null,!1,1793588149)},[i("span",[e._v("Increase contrast (SHIFT+C)")])])],1),i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ico",attrs:{color:"white",small:"",icon:""},on:{click:function(t){return e.resetImage()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-reload")])],1)]}}],null,!1,702739909)},[i("span",[e._v("Reset image (SHIFT+R)")])])],1):e._e()],1),e.imgLoaded&&e.regionEvents?i("v-col",{staticClass:"pa-md-4",attrs:{md:"4"}},[i("v-text-field",{staticClass:"float-left ml-4 mt-4",style:{width:"70%"},attrs:{placeholder:"Type your label",outlined:""},on:{change:function(t){return e.addNewLabel(t)},focus:function(t){e.inputFocused=!0},blur:function(t){e.inputFocused=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}}),i("v-btn",{staticClass:"mt-6",attrs:{icon:"",outlined:""},on:{click:function(t){e.selectedLabel=""}}},[i("v-icon",[e._v("mdi-close")])],1),i("v-switch",{staticClass:"d-block ml-4",attrs:{color:"secondary",label:e.showLabels?"Hide region labels":"Show region labels"},model:{value:e.showLabels,callback:function(t){e.showLabels=t},expression:"showLabels"}}),i("v-switch",{staticClass:"d-block ml-4",attrs:{color:"secondary",label:e.showRegions?"Hide all regions":"Show all regions"},on:{change:function(t){return e.setShowRegions(t)}},model:{value:e.showRegions,callback:function(t){e.showRegions=t},expression:"showRegions"}}),i("v-switch",{staticClass:"d-block ml-4",attrs:{color:"secondary",label:e.editingMode?"Disable editing mode":"Enable editing mode"},model:{value:e.editingMode,callback:function(t){e.editingMode=t},expression:"editingMode"}}),i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[i("v-btn",e._g(e._b({staticClass:"ma-auto mb-4 d-block",attrs:{icon:"",outlined:""},on:{click:function(t){return e.$refs.birdComponent.removeAllRegions()}}},"v-btn",r,!1),n),[i("v-icon",[e._v("mdi-delete")])],1)]}}],null,!1,4179817773)},[i("span",[e._v("Remove all regions (CTRL+SHIFT+D)")])]),i("v-divider"),i("v-list",{staticClass:"labels overflow-y-auto",style:{maxHeight:"28%"},attrs:{rounded:""}},[i("v-list-item-group",{attrs:{color:"secondary"},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},e._l(e.labels,(function(t,n){return i("v-list-item",{key:"label_"+t,staticClass:"d-inline-block mr-1",style:e.labelColor(t)},[i("v-list-item-content",{staticClass:"d-inline-block"},[i("v-list-item-title",{staticClass:"d-inline-block label_wrapper",domProps:{innerHTML:e._s(e.labelContent(t,n))}})],1),i("v-hover",{scopedSlots:e._u([{key:"default",fn:function(n){var r=n.hover;return[i("v-list-item-action",{staticClass:"float-right mt-3",on:{click:function(i){return i.stopPropagation(),e.clickListIcon(t)}}},[i("v-icon",{attrs:{small:"",color:r?e.showRegions?"red":"green":""}},[e._v(" "+e._s(e.showRegions?"mdi-close":e.hiddenLabels.indexOf(t)>=0?"mdi-eye-off":"mdi-eye")+" ")])],1)]}}],null,!0)})],1)})),1)],1)],1):e._e()],1)],1)],1)},Z=[],W=100,j=1,H=10,Y=300,$=0,N=.1,q=8,U=.01,D={components:{bird:B},props:{dialog:Boolean,regionEvents:Boolean,bird:{type:Object,default:null},birdIndex:{type:Number,default:0},birdLength:{type:Number,default:0},labels:{type:Array,default:function(){return[]}}},data:function(){return{brightness:W,contrast:W,zoom:j,alert:!1,alertMessage:"",alertMessageType:"success",selectedLabel:"",hiddenLabels:[],inputFocused:!1,showLabels:!0,showRegions:!0,editingMode:!1,imgLoaded:!1}},computed:{imgStyle:function(){return{filter:"brightness("+this.brightness+"%) contrast("+this.contrast+"%)"}},labelStyle:function(){return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},actualSizeActive:function(){return this.zoom==Math.round(100*this.$refs.birdComponent.actualSize)/100},resetZoomActive:function(){var e=this.$refs.birdComponent.transform;return this.zoom==j&&!e.x&&!e.y},imgPage:{get:function(){return this.birdIndex+1},set:function(e){this.$emit("set-bird",e-1)}},selectedItem:{get:function(){return this.labels.indexOf(this.selectedLabel)>=0?this.labels.indexOf(this.selectedLabel):null},set:function(e){e>=0&&e<this.labels.length&&(this.selectedLabel=this.labels[e]),this.$refs.birdComponent&&this.$refs.birdComponent.updateClickedLabel(this.selectedLabel)}}},created:function(){var e=this,t={lbIndex:"",lbTimeout:void 0};window.addEventListener("keydown",(function(i){e.shortcuts(i,t)}))},destroyed:function(){window.removeEventListener("keydown",this.shortcuts)},methods:{setAlertMessage:function(e,t){if(!e)return!1;this.alert=!0,this.alertMessage=e,this.alertMessageType=t||"success"},closeModal:function(){this.alert=!1,this.alertMessage="",this.$emit("close-modal")},addNewLabel:function(e){var t=this.labels.slice();e&&-1==t.indexOf(e)&&(t.push(e),this.$emit("update-labels",t)),this.$refs.birdComponent&&this.$refs.birdComponent.updateClickedLabel(e)},labelContent:function(e,t){return'<span class="label_index">['+t+"]</span><span>"+e+"</span>"},clickListIcon:function(e){this.showRegions?this.$refs.birdComponent.removeRegionByLabel(e):this.hiddenLabels.indexOf(e)>=0?(this.hiddenLabels.splice(this.hiddenLabels.indexOf(e),1),this.selectedLabel=e):this.hiddenLabels.push(e)},updateHiddenLabels:function(e){e&&(this.hiddenLabels=e)},labelColor:function(e){if(this.$refs.birdComponent){var t=this.$refs.birdComponent.getColorFn(this.labels);return{backgroundColor:t(e)}}},increaseZoom:function(){this.zoom+=N,this.zoom>q&&(this.zoom=q),this.zoom=Math.round(100*this.zoom)/100},increaseBrightness:function(){this.brightness+=H,this.brightness>Y&&(this.brightness=Y)},increaseContrast:function(){this.contrast+=H,this.contrast>Y&&(this.contrast=Y)},decreaseZoom:function(){this.zoom-=N,this.zoom<U&&(this.zoom=U),this.zoom=Math.round(100*this.zoom)/100},decreaseBrightness:function(){this.brightness-=H,this.brightness<$&&(this.brightness=$)},decreaseContrast:function(){this.contrast-=H,this.contrast<$&&(this.contrast=$)},setShowLabels:function(e){this.showLabels=e},setShowRegions:function(e){this.hiddenLabels=e?[]:u.a.cloneDeep(this.labels),this.showRegions=e},setEditing:function(e){this.editingMode=e},setZoom:function(e){("number"!==typeof e||e<U)&&(e=U),e>q&&(e=q),this.zoom=Math.round(100*e)/100},shortcuts:function(e,t){if(!this.dialog||!this.imgLoaded||this.inputFocused)return!1;var i=this,n=e.keyCode;if(e.shiftKey&&e.ctrlKey)switch(n){case 68:this.$refs.birdComponent&&this.$refs.birdComponent.removeAllRegions();break}else if(e.ctrlKey)switch(n){case 67:break;case 86:break}else if(e.shiftKey)switch(n){case 65:this.decreaseBrightness();break;case 67:this.increaseContrast();break;case 69:this.editingMode=!this.editingMode;break;case 70:this.$refs.birdComponent&&this.$refs.birdComponent.resetZoom();break;case 71:this.$refs.birdComponent&&this.$refs.birdComponent.setActualSize();break;case 72:this.showRegions=!this.showRegions;break;case 73:this.increaseZoom();break;case 76:this.showLabels=!this.showLabels;break;case 79:this.decreaseZoom();break;case 82:this.resetImage();break;case 83:this.increaseBrightness();break;case 84:this.selectedItem<this.labels.length-1?this.selectedItem+=1:this.selectedItem=0;break;case 88:this.decreaseContrast();break}else{switch(n){case 8:if(this.$refs.birdComponent){var r=this.labels.length-1;this.$refs.birdComponent.removeLastRegion(r)}break;case 27:this.$refs.birdComponent&&(this.$refs.birdComponent.removeAddingRegion(),this.$refs.birdComponent.unclickLabels());break;case 32:case 39:if(this.imgPage==this.birdLength)return!1;this.imgPage+=1;break;case 37:if(1==this.imgPage)return!1;this.imgPage-=1;break}n>=48&&n<=57&&(t.lbIndex+=String.fromCharCode(n),clearTimeout(t.lbTimeout),t.lbTimeout=setTimeout((function(){var e=parseInt(t.lbIndex);e<i.labels.length&&(i.selectedItem=e),t.lbIndex=""}),300))}},resetImage:function(){this.brightness=W,this.contrast=W,this.$refs.birdComponent&&this.$refs.birdComponent.resetZoom()}}},J=D,P=i("0798"),G=i("b0af"),K=i("62ad"),Q=i("169a"),X=i("ce7e"),ee=i("ce87"),te=i("8860"),ie=i("da13"),ne=i("1800"),re=i("5d23"),ae=i("1baa"),se=i("891e"),oe=i("0fd9"),le=i("2fa4"),Ae=i("e0c7"),de=i("b73d"),ce=i("8654"),ue=i("71d9"),he=i("2a7f"),ge=i("3a2f"),fe=Object(S["a"])(J,V,Z,!1,null,null,null),be=fe.exports;I()(fe,{VAlert:P["a"],VBtn:F["a"],VCard:G["a"],VCol:K["a"],VDialog:Q["a"],VDivider:X["a"],VHover:ee["a"],VIcon:E["a"],VList:te["a"],VListItem:ie["a"],VListItemAction:ne["a"],VListItemContent:re["a"],VListItemGroup:ae["a"],VListItemTitle:re["b"],VPagination:se["a"],VRow:oe["a"],VSpacer:le["a"],VSubheader:Ae["a"],VSwitch:de["a"],VTextField:ce["a"],VToolbar:ue["a"],VToolbarItems:he["a"],VToolbarTitle:he["b"],VTooltip:ge["a"]});var me,pe=i("bc3a"),ve=i.n(pe),ye={name:"Birds",components:{bird:B,idialog:be},data:function(){return{birds:[],labels:[],hash:"pHanYmhK2D3S2w3y0XnUJypyIl7",selectedBird:null,birdIndex:0,dialog:!1,regionEvents:!0,loadingMsg:""}},created:function(){this.resetInterval()},mounted:function(){this.listBirds()},methods:{listBirds:function(){var e=this;if(this.birds=[],!this.hash)return this.loadingMsg="",!1;this.loadingMsg="Loading...",ve.a.get("https://strato.dev.bigml.io/andromeda/shared/source/"+this.hash+"?exclude=sources;parent_optype=!image").then((function(t){var i,n=t.data["fields"],r=t.data["fields_preview"],a=0,s=0,o=[],l=[];if(r){i=Object.keys(r);while(a<i.length)"image"==n[i[a]].optype&&(o=r[i[a]]),"regions"==n[i[a]].optype&&(l=r[i[a]]),a++}if(o){a=0;while(a<o.length){if(e.birds.push({url:"https://strato.dev.bigml.com/shared/source/"+o[a]+"/image/source/"+e.hash,regions:l&&l.length==o.length?l[a]:[]}),s=0,l.length)while(s<l[a].length)-1==e.labels.indexOf(l[a][s][0])&&e.labels.push(l[a][s][0]),s++;a++}e.labels.length&&(e.$refs.idialog.selectedLabel=e.labels[0])}e.loadingMsg=e.birds.length?"":"There are no images"}))["catch"]((function(){e.loadingMsg="An error happened retrieving the images..."}))},shuffle:function(e){this.birds=u.a.shuffle(this.birds),e&&this.resetInterval()},resetInterval:function(){var e=this;clearInterval(me),me=setInterval((function(){e.shuffle()}),5e3)},updateLabels:function(e){e&&(this.labels=e)},setBird:function(e){this.selectedBird=this.birds[e],this.birdIndex=e,this.$refs.idialog.$refs.birdComponent&&this.$refs.idialog.$refs.birdComponent.resetZoom()},updateBird:function(e){this.selectedBird=e,this.birds[this.birdIndex]=e},openModal:function(e,t,i){if(this.regionEvents=i||!1,this.dialog)return this.dialog=!1,!1;e&&(this.selectedBird=e,this.birdIndex=t),clearInterval(me),this.dialog=!0,this.$refs.idialog.$refs.birdComponent&&(this.$refs.idialog.resetImage(),this.$refs.idialog.$refs.birdComponent.resetRegions())},closeModal:function(){var e=this;this.dialog=!1,this.resetInterval(),setTimeout((function(){if(e.dialog)return!1;e.selectedBird=null,e.birdIndex=0}),500)}}},we=ye,xe=Object(S["a"])(we,a,s,!1,null,null,null),_e=xe.exports;I()(xe,{VBtn:F["a"],VTextField:ce["a"]});var ke={name:"App",components:{Birds:_e},data:function(){return{msg:"Vue.js and bounding boxes with D3",bigmlUrl:"https://bigml.com"}}},Le=ke,Ce=(i("cf25"),i("7496")),Se=Object(S["a"])(Le,n,r,!1,null,null,null),Me=Se.exports;I()(Se,{VApp:Ce["a"]});var Ie=i("2b0e"),Fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("Page not found")])},Ee=[],Re={},Te=Object(S["a"])(Re,Fe,Ee,!1,null,null,null),ze=Te.exports,Oe=i("7088"),Be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v("This user has 7 birds")])},Ve=[],Ze={},We=Object(S["a"])(Ze,Be,Ve,!1,null,null,null),je=We.exports,He=i("8c4f");Ie["a"].use(He["a"]);var Ye=[{path:"*",component:ze},{path:"/user/:name",component:Oe["default"],children:[{path:"birds",component:je}]}],$e=new He["a"]({mode:"history",routes:Ye}),Ne=$e,qe=(i("bf40"),i("f309"));Ie["a"].use(qe["a"]);var Ue={},De=new qe["a"](Ue);Ie["a"].config.productionTip=!1,new Ie["a"]({el:"#app",vuetify:De,router:Ne,render:function(e){return e(Me)}})},7088:function(e,t,i){"use strict";var n=i("54a4"),r=i("72f1"),a=i("2877"),s=Object(a["a"])(r["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports},"72f1":function(e,t,i){"use strict";var n=i("a751"),r=i.n(n);t["default"]=r.a},a751:function(e,t){},cf05:function(e,t){e.exports="data:image/png;base64,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7iVgTZHHGCTnYTHsOClmMTCshiRNIcYTWMyacJA0w05ugTihSwWLYacaSDNMDmLYlNNbsBh2hjSzGKJAdUHk2XMbsJg1/zyJhgkBk+3OreH9WBLs+4QiEg278D6Sd/Gh5PfYQDPhdgkqcNjmdPGSCVazZC+TaBaDo2Sqynvs4AoPqYZpVpngMOv9FFKbjWKXTHEYZZokSaJZSm04zLJ2m55PYo8i7IANVketrzy2jNSYDDPDZlZ8pvFRexJNArZI+7AmiONXyWmv87hhM8y2/yA5fZzz87EHfnIqSUUiBNRveX8tSc8ZMz7j7a6TGvwMPfNMb4gp37wVj2GazVpfUqOgqKAU1KhlP915eyJ6tN52v0OaYYxnqsDdD5+uy8dS76IZt8XfkTTTWG4iCqz2S+itlg3nSQs45J7M0nvo5eP9YpKjAQbYzxSgB5xqI7mGRT+InQE2Qn0N3LS7XWQaZvnwth24C7b9ESL05K+SZ9i0/vcbZOKABpztCESUH7cayDLMVd1mCv8loAFajIaIYJuoRWLqtfS6GXqMM3PLKWaGI9bvF9Qz9ExAmKZ+gaRsb79HVzbS9n2ChjawIKl9v1OZIf+xrfN7U2hK8XtCgllcPTULn8jJPC0H10VOJjMZGfKflbfY7Ii1fS+7wMbkfRIJ9TqXBzjlXhVKAzqyq0l2OrDTeZ+tulS8Z/J7teemLx7YPs0nOQKYLBkErTaIl244yJCv481l2GbENuHkKv2ZLDJ6OS9JNo2BgfvV+ZdKQiVddzyBlXOToFHwZYaVzQyKoQWv+Uk3DJIVjxa/AfZVFUUYGa6yMEzjA/ZN3r6rsSTdNIiR9sj5mxHEYe8g17ChCwAIlNLiKe09qQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0yNVQxNTowOTozMyswMDowMAI3LcMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMjVUMTU6MDk6MzMrMDA6MDBzapV/AAAARnRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA2LjcuOC05IDIwMTQtMDUtMTIgUTE2IGh0dHA6Ly93d3cuaW1hZ2VtYWdpY2sub3Jn3IbtAAAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABh0RVh0VGh1bWI6OkltYWdlOjpoZWlnaHQAMTkyDwByhQAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAxOTLTrCEIAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE2MTQyNjU3NzMcuy6PAAAAD3RFWHRUaHVtYjo6U2l6ZQAwQkKUoj7sAAAAVnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vbW50bG9nL2Zhdmljb25zLzIwMjEtMDItMjUvODFkYzlhZmZlZTdlM2ViNGQwMzJjOGFlM2I5ZjY1ZDUuaWNvLnBuZ3rO/74AAAAASUVORK5CYII="},cf25:function(e,t,i){"use strict";i("fea6")},fea6:function(e,t,i){}});
//# sourceMappingURL=app.c594d1c7.js.map