{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/User.vue?4144","webpack:///./src/App.vue?7baa","webpack:///./src/components/Birds.vue?de3e","webpack:///./src/components/Bird.vue?dc48","webpack:///./src/plugins/d3.utils.js","webpack:///src/components/Bird.vue","webpack:///./src/components/Bird.vue?71cf","webpack:///./src/components/Bird.vue","webpack:///./src/components/Dialog.vue?c45a","webpack:///src/components/Dialog.vue","webpack:///./src/components/Dialog.vue?c80b","webpack:///./src/components/Dialog.vue","webpack:///src/components/Birds.vue","webpack:///./src/components/Birds.vue?a5b1","webpack:///./src/components/Birds.vue","webpack:///src/App.vue","webpack:///./src/App.vue?382d","webpack:///./src/App.vue","webpack:///./src/components/NotFound.vue?f1a1","webpack:///./src/components/NotFound.vue","webpack:///./src/components/UserBirds.vue?71f0","webpack:///./src/components/UserBirds.vue","webpack:///./src/router/index.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/components/User.vue","webpack:///./src/components/User.vue?1051","webpack:///./src/assets/logo.png","webpack:///./src/App.vue?3071"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","_v","_s","$route","params","staticRenderFns","staticClass","attrs","msg","bigmlUrl","style","margin","width","on","$event","listBirds","model","callback","$$v","hash","expression","birds","_l","b","index","url","openModal","_e","loadingMsg","ref","dialog","regionEvents","selectedBird","birdIndex","labels","setBird","updateBird","closeModal","updateLabels","directives","rawName","shuffle","init","birdUrl","loaded","error","expanded","isLoaded","d3","moveToFront","each","parentNode","appendChild","CATEGORY_COLORS","dragged","event","rgD3","cpnt","editingMode","newX","newY","rwidth","imgWidth","rheight","imgHeight","subject","x","y","updateRegionElements","resized","square","dSquare","region","imgWrapper","querySelectorAll","attr","diffx","parseFloat","diffy","classed","newW","newH","minSize","label","showRegions","show","hiddenLabels","indexOf","rgData","idx","updateBirdData","newBird","regions","rgs","$emit","originScale","containerScale","props","bird","type","default","bindex","Number","imgStyle","zoom","Array","selectedLabel","String","Boolean","showLabels","raw","img","isError","transform","computed","editStyle","actualSize","k","ZOOM_MIN","ZOOM_MAX","labelSet","replace","watch","val","displayLabels","hideLabels","displayAllRegions","hideAllRegions","enableEditingMode","disableEditingMode","mounted","addEventListener","methods","events","el","DEFAULT_ZOOM","maxImgHeight","setRegions","_g","append","scale","scaledRegions","ic","currentRg","validRegions","colorFn","getColorFn","regs","exit","remove","rglabels","lbBackgrounds","getRegions","originalRegions","scaledRgs","scl","removeAllRegions","removeAddingRegion","addNewRegion","finishRegion","initPoint","newRegion","addingRect","addingText","addingBg","updateClickedLabel","lb","d3Clicked","empty","newData","d3Rect","d3Text","d3Back","unclickLabels","clicked","onClickOutside","removeRegionByIndex","removeRegionByLabel","indexesToRemove","ir","removeLastRegion","parseInt","selectAll","update","select","setActualSize","resetRegions","resetZoom","component","VBtn","VIcon","ClickOutside","height","alertMessageType","alert","domProps","alertMessage","imgLoaded","updateHiddenLabels","setAlertMessage","setZoom","setShowLabels","setShowRegions","setEditing","birdLength","imgPage","scopedSlots","_u","fn","_b","class","active","actualSizeActive","$refs","birdComponent","resetZoomActive","decreaseZoom","increaseZoom","brightness","decreaseBrightness","increaseBrightness","contrast","decreaseContrast","increaseContrast","resetImage","addNewLabel","inputFocused","maxHeight","selectedItem","item","labelColor","labelContent","hover","stopPropagation","clickListIcon","components","DEFAULT_LUMINOSITY","filter","labelStyle","Math","round","set","page","created","shortcuts","args","destroyed","removeEventListener","msgType","newLabel","lbs","ZOOM_STEP","LUMINOSITY_STEP","LUMINOSITY_MAX","LUMINOSITY_MIN","shiftKey","ctrlKey","kcode","lbIndex","fromCharCode","clearTimeout","lbTimeout","setTimeout","VAlert","VCard","VCol","VDialog","VDivider","VHover","VList","VListItem","VListItemAction","VListItemContent","VListItemGroup","VListItemTitle","VPagination","VRow","VSpacer","VSubheader","VSwitch","VTextField","VToolbar","VToolbarItems","VToolbarTitle","VTooltip","Bird","idialog","resetInterval","reset","clearInterval","shuffleInterval","setInterval","cm","Birds","VApp","script","Vue","use","VueRouter","routes","path","NotFound","User","children","UserBirds","router","Vuetify","opts","config","productionTip","vuetify","h","App"],"mappings":"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","file":"js/app.c594d1c7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/vuela/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" The user is \"+_vm._s(_vm.$route.params.name)+\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{staticClass:\"app\"},[_c('div',{staticClass:\"header\"},[_c('img',{staticClass:\"logo\",attrs:{\"alt\":\"Vue logo\",\"src\":require(\"./assets/logo.png\")}}),_c('h2',{staticClass:\"mt-2\"},[_vm._v(_vm._s(_vm.msg))])]),_c('Birds'),_c('div',{staticClass:\"footer\"},[_c('a',{staticClass:\"bigml_link\",attrs:{\"href\":_vm.bigmlUrl,\"target\":\"_blank\"}},[_c('span')])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"birds_wrapper mt-6 mb-6\"},[_c('v-text-field',{style:({ margin: '0 auto', width: '50%' }),attrs:{\"label\":\"BigML composite hash\",\"outlined\":\"\",\"readonly\":\"\"},on:{\"change\":function($event){return _vm.listBirds()}},model:{value:(_vm.hash),callback:function ($$v) {_vm.hash=$$v},expression:\"hash\"}}),(_vm.birds.length)?_c('transition-group',{staticClass:\"birds\",attrs:{\"name\":\"image-list\",\"appear\":\"\"}},_vm._l((_vm.birds),function(b,index){return _c('bird',{key:'grid_' + b.url,attrs:{\"bird\":b,\"bindex\":index},on:{\"open-modal\":_vm.openModal}})}),1):_vm._e(),(!_vm.birds.length && _vm.loadingMsg)?_c('div',{staticClass:\"loading\"},[_vm._v(_vm._s(_vm.loadingMsg))]):_vm._e(),_c('idialog',{ref:\"idialog\",attrs:{\"dialog\":_vm.dialog,\"region-events\":_vm.regionEvents,\"bird\":_vm.selectedBird,\"bird-index\":_vm.birdIndex,\"bird-length\":_vm.birds.length,\"labels\":_vm.labels},on:{\"set-bird\":_vm.setBird,\"update-bird\":_vm.updateBird,\"close-modal\":_vm.closeModal,\"update-labels\":_vm.updateLabels}}),_c('v-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.birds.length),expression:\"birds.length\"}],on:{\"click\":function($event){return _vm.shuffle(true)}}},[_vm._v(\"Shuffle\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.onClickOutside),expression:\"onClickOutside\"}],staticClass:\"image_wrapper\"},[_c('div',{staticClass:\"zoom_wrapper\"},[_c('transition',{attrs:{\"name\":\"image-fade\"},on:{\"afterEnter\":_vm.init}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoaded),expression:\"isLoaded\"}],style:(_vm.imgStyle),attrs:{\"src\":_vm.birdUrl},on:{\"load\":_vm.loaded,\"error\":_vm.error,\"click\":function($event){return _vm.openModal(false)}}})]),(!_vm.expanded && _vm.isLoaded)?_c('v-btn',{style:(_vm.editStyle),attrs:{\"icon\":\"\",\"dark\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.openModal(true)}}},[_c('v-icon',[_vm._v(\"mdi-pencil\")])],1):_vm._e()],1),(_vm.isError)?_c('div',{staticClass:\"loading\"},[_vm._v(\"Error happened loading the image...\")]):_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoaded),expression:\"!isLoaded\"}],staticClass:\"loading\"},[_vm._v(\"Loading...\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as d3 from 'd3'\n\nd3.selection.prototype.moveToFront = function () {\n  return this.each(function () {\n    this.parentNode.appendChild(this)\n  })\n}\n\nconst CATEGORY_COLORS = [\n  '#1f77b4',\n  '#ff7f0e',\n  '#2ca02c',\n  '#d62728',\n  '#9467bd',\n  '#8c564b',\n  '#e377c2',\n  '#7f7f7f',\n  '#bcbd22',\n  '#17becf',\n  '#aec7e8',\n  '#ffbb78',\n  '#98df8a',\n  '#ff9896',\n  '#c5b0d5',\n  '#c49c94',\n  '#f7b6d2',\n  '#c7c7c7',\n  '#dbdb8d',\n  '#9edae5',\n  '#393b79',\n  '#5254a3',\n  '#6b6ecf',\n  '#9c9ede',\n  '#637939',\n  '#8ca252',\n  '#b5cf6b',\n  '#cedb9c',\n  '#8c6d31',\n  '#bd9e39',\n  '#e7ba52',\n  '#e7cb94',\n  '#843c39',\n  '#ad494a',\n  '#d6616b',\n  '#e7969c',\n  '#7b4173',\n  '#a55194',\n  '#ce6dbd',\n  '#de9ed6',\n  '#3182bd',\n  '#6baed6',\n  '#9ecae1',\n  '#c6dbef',\n  '#e6550d',\n  '#fd8d3c',\n  '#fdae6b',\n  '#fdd0a2',\n  '#31a354',\n  '#74c476',\n  '#a1d99b',\n  '#c7e9c0',\n  '#756bb1',\n  '#9e9ac8',\n  '#bcbddc',\n  '#dadaeb',\n  '#636363',\n  '#969696',\n  '#bdbdbd',\n  '#d9d9d9'\n]\n\nexport { CATEGORY_COLORS }\n","<template>\n  <div v-click-outside=\"onClickOutside\" class=\"image_wrapper\">\n    <div class=\"zoom_wrapper\">\n      <transition name=\"image-fade\" @afterEnter=\"init\">\n        <img\n          :src=\"birdUrl\"\n          :style=\"imgStyle\"\n          @load=\"loaded\"\n          @error=\"error\"\n          @click=\"openModal(false)\"\n          v-show=\"isLoaded\"\n        />\n      </transition>\n      <v-btn icon dark small :style=\"editStyle\" @click=\"openModal(true)\" v-if=\"!expanded && isLoaded\">\n        <v-icon>mdi-pencil</v-icon>\n      </v-btn>\n    </div>\n    <div class=\"loading\" v-if=\"isError\">Error happened loading the image...</div>\n    <div class=\"loading\" v-else v-show=\"!isLoaded\">Loading...</div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport * as d3u from '../plugins/d3.utils.js'\nimport _ from 'lodash'\n\nconst DEFAULT_ZOOM = 1\nconst ZOOM_MAX = 8\nconst ZOOM_MIN = 0.01\nconst REGIONS_ALLOWED = 40\n\nlet initPoint = null\n\n// Method to drag a region\nfunction dragged(event, rgD3, cpnt) {\n  if (!cpnt.editingMode) return\n\n  let rgData = rgD3.data()[0],\n    newX = parseFloat(event.x) - parseFloat(event.subject.x || event.x) + parseFloat(rgD3.attr('x')),\n    newY = parseFloat(event.y) - parseFloat(event.subject.y || event.y) + parseFloat(rgD3.attr('y')),\n    w = rgData[3] - rgData[1],\n    h = rgData[4] - rgData[2]\n  if (newX < 0) newX = 0\n  if (newY < 0) newY = 0\n\n  let rwidth = parseFloat(rgD3.attr('width')),\n    rheight = parseFloat(rgD3.attr('height'))\n  if (newX + rwidth > cpnt.imgWidth) newX = cpnt.imgWidth - rwidth\n  if (newY + rheight > cpnt.imgHeight) newY = cpnt.imgHeight - rheight\n\n  rgD3\n    .attr('x', newX)\n    .attr('y', newY)\n    .data([[rgData[0], newX, newY, newX + w, newY + h]])\n  event.subject['x'] = event.x\n  event.subject['y'] = event.y\n  updateRegionElements(rgD3, cpnt)\n}\n\n// Method to resize a region\nfunction resized(event, square, cpnt) {\n  let img = cpnt.img,\n    imgWrapper = img.parentElement,\n    minSize = 1,\n    region,\n    rgD3,\n    label,\n    diffx,\n    diffy,\n    newX,\n    newY,\n    newW,\n    newH,\n    rwidth,\n    rheight,\n    dSquare\n\n  dSquare = d3.select(square)\n  region = imgWrapper.querySelectorAll('rect.region[index=\"' + dSquare.attr('index') + '\"]')[0]\n  rgD3 = d3.select(region)\n  diffx = parseFloat(event.x) - parseFloat(event.subject.x)\n  diffy = parseFloat(event.y) - parseFloat(event.subject.y)\n  rwidth = parseFloat(rgD3.attr('width'))\n  rheight = parseFloat(rgD3.attr('height'))\n  if (dSquare.classed('top_left')) {\n    newX = diffx + parseFloat(rgD3.attr('x'))\n    newY = diffy + parseFloat(rgD3.attr('y'))\n    if (newX < 0) {\n      newX = 0\n      diffx = 0\n    }\n    if (newY < 0) {\n      newY = 0\n      diffy = 0\n    }\n    newW = rwidth - diffx\n    newH = rheight - diffy\n  } else if (dSquare.classed('bottom_right')) {\n    newX = parseFloat(rgD3.attr('x'))\n    newY = parseFloat(rgD3.attr('y'))\n    newW = rwidth + diffx\n    newH = rheight + diffy\n  } else if (dSquare.classed('bottom_left')) {\n    newX = diffx + parseFloat(rgD3.attr('x'))\n    newY = parseFloat(rgD3.attr('y'))\n    if (newX < 0) {\n      newX = 0\n      diffx = 0\n    }\n    newW = rwidth - diffx\n    newH = rheight + diffy\n  } else if (dSquare.classed('top_right')) {\n    newX = parseFloat(rgD3.attr('x'))\n    newY = diffy + parseFloat(rgD3.attr('y'))\n    if (newY < 0) {\n      newY = 0\n      diffy = 0\n    }\n    newW = rwidth + diffx\n    newH = rheight - diffy\n  } else {\n    return\n  }\n\n  // Fix new with and height\n  if (newW < minSize) {\n    newW = minSize\n    newX = parseFloat(rgD3.attr('x'))\n  }\n  if (newH < minSize) {\n    newH = minSize\n    newY = parseFloat(rgD3.attr('y'))\n  }\n  if (newX + newW > cpnt.imgWidth) newW = cpnt.imgWidth - newX\n  if (newY + newH > cpnt.imgHeight) newH = cpnt.imgHeight - newY\n\n  // Update region data\n  rgD3.attr('x', newX).attr('y', newY).attr('width', newW).attr('height', newH)\n  label = rgD3.data()[0][0]\n  rgD3.data([[label, newX, newY, newX + newW, newY + newH]])\n  event.subject['x'] = event.x\n  event.subject['y'] = event.y\n  updateRegionElements(rgD3, cpnt)\n}\n\n// Method to update elements binded to a region\nfunction updateRegionElements(region, cpnt) {\n  let img = cpnt.img,\n    imgWrapper = img.parentElement,\n    idx = region.attr('index'),\n    rgData = region.data()[0],\n    txt = imgWrapper.querySelectorAll('text.region_label[index=\"' + idx + '\"]')[0],\n    height = 18,\n    padding = 5,\n    radius = 3,\n    margin = 5,\n    closeMargin = 4,\n    textLimit = 13,\n    rectLimit = 0,\n    resizesz = 8,\n    deleteSize = 15,\n    res,\n    closeX\n\n  d3.select(txt)\n    .attr('x', function () {\n      return parseFloat(rgData[1]) + padding\n    })\n    .attr('y', function () {\n      res = parseFloat(rgData[2]) - padding - margin\n      if (res < textLimit) res = textLimit\n      return res\n    })\n    .style('display', 'block')\n    .style('opacity', function () {\n      return rgData && rgData[0] ? 1 : 0\n    })\n    .text(function (d) {\n      return d[0] || ''\n    })\n\n  d3.select(imgWrapper.querySelectorAll('rect.region_label_background[index=\"' + idx + '\"]')[0])\n    .attr('rx', radius)\n    .attr('ry', radius)\n    .attr('x', function () {\n      return parseFloat(rgData[1])\n    })\n    .attr('y', function () {\n      res = parseFloat(rgData[2]) - height - margin\n      if (res < rectLimit) res = rectLimit\n      return res\n    })\n    .attr('width', function () {\n      return txt.getComputedTextLength() + 2 * padding\n    })\n    .attr('height', height)\n    .style('display', function () {\n      let show = cpnt.showLabels\n      if (!cpnt.showRegions) {\n        show = show && cpnt.hiddenLabels.indexOf(rgData[0]) == -1\n      }\n      return show ? 'block' : 'none'\n    })\n    .transition()\n    .style('opacity', function () {\n      return rgData && rgData[0] ? 1 : 0\n    })\n  d3.select(txt).style('display', function () {\n    let show = cpnt.showLabels\n    if (!cpnt.showRegions) {\n      show = show && cpnt.hiddenLabels.indexOf(rgData[0]) == -1\n    }\n    return show ? 'block' : 'none'\n  })\n  region.style('display', function () {\n    return cpnt.hiddenLabels.indexOf(rgData[0]) == -1 ? 'block' : 'none'\n  })\n\n  d3.select(imgWrapper.querySelectorAll('.delete_region_wrapper[index=\"' + idx + '\"]')[0])\n    .attr('x', function () {\n      closeX = parseFloat(rgData[3]) + closeMargin\n      if (closeX + deleteSize >= cpnt.imgWidth) closeX = cpnt.imgWidth - deleteSize\n      return closeX\n    })\n    .attr('y', function () {\n      return parseFloat(rgData[2])\n    })\n    .attr('width', deleteSize)\n    .attr('height', deleteSize)\n    .style('display', function () {\n      return cpnt.hiddenLabels.indexOf(rgData[0]) == -1 ? 'block' : 'none'\n    })\n\n  d3.select(imgWrapper.querySelectorAll('rect.top_left[index=\"' + idx + '\"]')[0])\n    .attr('x', function () {\n      return rgData[1] - resizesz / 2\n    })\n    .attr('y', function () {\n      return rgData[2] - resizesz / 2\n    })\n    .attr('width', resizesz)\n    .attr('height', resizesz)\n  d3.select(imgWrapper.querySelectorAll('rect.top_right[index=\"' + idx + '\"]')[0])\n    .attr('x', function () {\n      return parseFloat(rgData[3] - resizesz / 2)\n    })\n    .attr('y', function () {\n      return rgData[2] - resizesz / 2\n    })\n    .attr('width', resizesz)\n    .attr('height', resizesz)\n  d3.select(imgWrapper.querySelectorAll('rect.bottom_right[index=\"' + idx + '\"]')[0])\n    .attr('x', function () {\n      return parseFloat(rgData[3] - resizesz / 2)\n    })\n    .attr('y', function () {\n      return parseFloat(rgData[4] - resizesz / 2)\n    })\n    .attr('width', resizesz)\n    .attr('height', resizesz)\n  d3.select(imgWrapper.querySelectorAll('rect.bottom_left[index=\"' + idx + '\"]')[0])\n    .attr('x', function () {\n      return rgData[1] - resizesz / 2\n    })\n    .attr('y', function () {\n      return parseFloat(rgData[4] - resizesz / 2)\n    })\n    .attr('width', resizesz)\n    .attr('height', resizesz)\n  d3.selectAll(imgWrapper.querySelectorAll('rect.resize[index=\"' + idx + '\"]')).style('display', function () {\n    return cpnt.hiddenLabels.indexOf(rgData[0]) == -1 ? 'block' : 'none'\n  })\n\n  // Sort elements\n  if (cpnt.editingMode) {\n    d3.selectAll('rect.region,rect.resize').moveToFront()\n    d3.selectAll('rect.region').each(function () {\n      idx = d3.select(this).attr('index')\n      d3.select(imgWrapper.querySelectorAll('rect.region_label_background[index=\"' + idx + '\"]')[0]).moveToFront()\n      d3.select(imgWrapper.querySelectorAll('text.region_label[index=\"' + idx + '\"]')[0]).moveToFront()\n    })\n    d3.selectAll('.delete_region_wrapper').moveToFront()\n  } else if (d3.select('rect.adding').empty()) {\n    d3.select('rect.overlay').moveToFront()\n    d3.selectAll('rect.region').each(function () {\n      idx = d3.select(this).attr('index')\n      d3.select(imgWrapper.querySelectorAll('rect.region_label_background[index=\"' + idx + '\"]')[0]).moveToFront()\n      d3.select(imgWrapper.querySelectorAll('text.region_label[index=\"' + idx + '\"]')[0]).moveToFront()\n    })\n  } else {\n    if (!d3.select('rect.adding').empty()) d3.select('rect.adding').moveToFront()\n    d3.select('rect.overlay').moveToFront()\n  }\n}\n\nfunction updateBirdData(cpnt) {\n  let newBird = _.cloneDeep(cpnt.bird),\n    rgs = cpnt.getRegions()\n  newBird.regions = rgs\n  cpnt.$emit('update-bird', newBird)\n}\n\nfunction zoom(cpnt, imgWrapper) {\n  return d3\n    .zoom()\n    .scaleExtent([ZOOM_MIN, ZOOM_MAX])\n    .on('zoom', function (ev) {\n      let wheel = ev.sourceEvent && ev.sourceEvent['type'] == 'wheel',\n        mousemove = ev.sourceEvent && ev.sourceEvent['type'] == 'mousemove',\n        transform = ev.transform,\n        k = transform['k'],\n        x = wheel ? cpnt.transform['x'] : transform['x'],\n        y = wheel ? cpnt.transform['y'] : transform['y']\n\n      if (d3.select('rect.region.adding').empty()) initPoint = null\n\n      cpnt.transform = { k: k, x: x, y: y }\n      cpnt.$emit('set-zoom', k)\n\n      d3.select(imgWrapper)\n        .transition()\n        .duration(wheel || mousemove ? 0 : 200)\n        .style('transform', 'translate(' + x + 'px,' + y + 'px) scale(' + k + ')')\n\n      d3.select(imgWrapper.parentElement).style('cursor', 'all-scroll')\n      d3.select('rect.overlay').style('cursor', 'all-scroll')\n    })\n    .on('end', function (ev) {\n      d3.select(imgWrapper.parentElement).style('cursor', 'default')\n      if (!cpnt.regionEvents) {\n        d3.select('rect.overlay').style('cursor', 'default')\n        return false\n      }\n      cpnt.unclickLabels()\n      d3.select('rect.overlay').style('cursor', 'crosshair')\n      if (initPoint) {\n        cpnt.$emit('set-editing', false)\n        if (cpnt.hiddenLabels.length) {\n          let hlabels = _.cloneDeep(cpnt.hiddenLabels),\n            idx = hlabels.indexOf(cpnt.selectedLabel)\n          if (idx >= 0) {\n            hlabels.splice(idx, 1)\n            cpnt.$emit('update-hidden-labels', hlabels)\n          }\n        } else {\n          cpnt.$emit('set-show-regions', true)\n        }\n        cpnt.addNewRegion()\n      }\n      if (ev.sourceEvent) {\n        d3.select(imgWrapper.parentElement).call(\n          zoom(cpnt, imgWrapper).transform,\n          d3.zoomIdentity.translate(cpnt.transform['x'], cpnt.transform['y']).scale(cpnt.transform['k'])\n        )\n      }\n    })\n}\n\nfunction originScale(cpnt) {\n  return {\n    x: d3.scaleLinear().domain([0, cpnt.imgWidth]).range([0, cpnt.img.naturalWidth]).interpolate(d3.interpolateRound),\n    y: d3.scaleLinear().domain([0, cpnt.imgHeight]).range([0, cpnt.img.naturalHeight]).interpolate(d3.interpolateRound)\n  }\n}\n\nfunction containerScale(cpnt) {\n  return {\n    x: d3.scaleLinear().domain([0, cpnt.img.naturalWidth]).range([0, cpnt.imgWidth]),\n    y: d3.scaleLinear().domain([0, cpnt.img.naturalHeight]).range([0, cpnt.imgHeight])\n  }\n}\n\nexport default {\n  name: 'Bird',\n  props: {\n    bird: {\n      type: Object,\n      default: null\n    },\n    bindex: {\n      type: Number,\n      default: 0\n    },\n    imgStyle: {\n      type: Object,\n      default: null\n    },\n    zoom: {\n      type: Number,\n      default: DEFAULT_ZOOM\n    },\n    labels: {\n      type: Array,\n      default: function () {\n        return []\n      }\n    },\n    hiddenLabels: {\n      type: Array,\n      default: function () {\n        return []\n      }\n    },\n    selectedLabel: {\n      type: String,\n      default: ''\n    },\n    regionEvents: {\n      type: Boolean,\n      default: true\n    },\n    showLabels: {\n      type: Boolean,\n      default: false\n    },\n    showRegions: {\n      type: Boolean,\n      default: false\n    },\n    editingMode: {\n      type: Boolean,\n      default: false\n    },\n    raw: Boolean,\n    expanded: Boolean\n  },\n  data: function () {\n    return {\n      img: null,\n      imgWidth: 0,\n      imgHeight: 0,\n      isLoaded: false,\n      isError: false,\n      transform: { k: DEFAULT_ZOOM, x: 0, y: 0 }\n    }\n  },\n  computed: {\n    editStyle: function () {\n      return { backgroundColor: 'rgba(0,0,0,.38)', float: 'right', position: 'relative', bottom: '32px', right: '4px' }\n    },\n    actualSize: function () {\n      if (!this.isLoaded || !this.img) return null\n      let maxImgHeight = parseInt(window.getComputedStyle(this.img).getPropertyValue('max-height')),\n        fitWidth = parseFloat((maxImgHeight / this.img.naturalHeight) * this.img.naturalWidth),\n        k = this.img.naturalWidth / fitWidth\n      if (k < ZOOM_MIN) k = ZOOM_MIN\n      if (k > ZOOM_MAX) k = ZOOM_MAX\n      return k\n    },\n    labelSet: function () {\n      return this.labels.slice()\n    },\n    birdUrl: function () {\n      return this.raw ? this.bird.url.replace('image', 'image/raw') : this.bird.url\n    }\n  },\n  watch: {\n    zoom: function (val) {\n      if (!this.img) return false\n      if (typeof val !== 'number' || val < ZOOM_MIN) val = ZOOM_MIN\n      if (val > ZOOM_MAX) val = ZOOM_MAX\n      let imgWrapper = this.img.parentElement\n      d3.select(imgWrapper.parentElement).call(\n        zoom(this, imgWrapper).transform,\n        d3.zoomIdentity.translate(this.transform['x'], this.transform['y']).scale(val)\n      )\n    },\n    hiddenLabels: function () {\n      let cpnt = this\n      if (!cpnt.showRegions) {\n        d3.selectAll('rect.region').each(function () {\n          updateRegionElements(d3.select(this), cpnt)\n        })\n      }\n    },\n    showLabels: function (val) {\n      if (val) {\n        this.displayLabels()\n      } else {\n        this.hideLabels()\n      }\n    },\n    showRegions: function (val) {\n      if (val) {\n        this.displayAllRegions()\n      } else {\n        this.hideAllRegions()\n      }\n    },\n    editingMode: function (val) {\n      if (val) {\n        this.enableEditingMode(true)\n      } else {\n        this.disableEditingMode()\n      }\n    }\n  },\n  mounted: function () {\n    // Listen for orientation changes\n    let cpnt = this,\n      w = window.innerWidth\n    window.addEventListener(\n      'resize',\n      function () {\n        if (window.innerWidth != w && cpnt.isLoaded) {\n          d3.selectAll('svg').remove()\n          cpnt.init(cpnt.img)\n        }\n        w = window.innerWidth\n      },\n      false\n    )\n  },\n  methods: {\n    openModal: function (events) {\n      if (this.expanded) return false\n      this.$emit('open-modal', this.bird, this.bindex, events)\n    },\n    loaded: function () {\n      this.isLoaded = true\n      this.$emit('image-loaded')\n    },\n    error: function () {\n      this.isError = true\n    },\n    init: function (el) {\n      let cpnt = this\n      cpnt.img = el\n      cpnt.transform = { k: DEFAULT_ZOOM, x: 0, y: 0 }\n      this.$emit('set-zoom', DEFAULT_ZOOM)\n      d3.selectAll('svg').remove()\n\n      if (!el || !cpnt.expanded) return false\n      if (!cpnt.regionEvents) {\n        cpnt.$emit('set-show-labels', true)\n        cpnt.$emit('set-editing', false)\n        cpnt.$emit('set-show-regions', true)\n      }\n\n      // Compute the image width and height\n      let maxImgHeight = parseInt(window.getComputedStyle(el).getPropertyValue('max-height'))\n      this.imgWidth = (el.naturalWidth * el.height) / el.naturalHeight\n      this.imgHeight = (el.naturalHeight * el.width) / el.naturalWidth\n      if (this.imgHeight > maxImgHeight) this.imgHeight = maxImgHeight\n\n      // Image svg\n      let _g = d3\n        .select(el.parentElement)\n        .append('svg')\n        .attr('id', 'svg_')\n        .attr('class', 'overlay_wrapper')\n        .attr('width', this.imgWidth)\n        .attr('height', this.imgHeight)\n        .style('top', el.offsetTop + 'px')\n        .style('left', (el.width - this.imgWidth) / 2 + 'px')\n        .append('g')\n        .attr('id', 'g_')\n\n      cpnt.setRegions(cpnt.bird.regions || [], true, true)\n\n      // Cross lines\n      _g.append('line')\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', this.imgHeight)\n        .attr('stroke', '#FFFFFF')\n        .attr('class', 'cross_line y')\n        .style('display', 'none')\n      _g.append('line')\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', this.imgWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#FFFFFF')\n        .attr('class', 'cross_line x')\n        .style('display', 'none')\n\n      // Image overlay\n      _g.append('rect')\n        .attr('class', 'overlay')\n        .attr('width', this.imgWidth)\n        .attr('height', this.imgHeight)\n        .style('fill', 'none')\n        .on('mousedown.overlay', function (event) {\n          if (d3.select('rect.region.adding').empty()) {\n            initPoint = [event.offsetX, event.offsetY]\n          } else {\n            cpnt.finishRegion()\n          }\n        })\n        .on('mousemove.overlay', function (event) {\n          if (!cpnt.regionEvents) return false\n          let pointer = [event.offsetX, event.offsetY]\n          d3.selectAll('.cross_line').style('display', 'block')\n          d3.select('.cross_line.x').attr('y1', pointer[1]).attr('y2', pointer[1])\n          d3.select('.cross_line.y').attr('x1', pointer[0]).attr('x2', pointer[0])\n          d3.select(this).style('cursor', 'crosshair')\n          if (initPoint) {\n            let addingRect = d3.select('rect.region.adding')\n            if (pointer[0] >= initPoint[0]) {\n              addingRect.attr('width', pointer[0] - initPoint[0])\n            } else {\n              addingRect.attr('x', pointer[0]).attr('width', initPoint[0] - pointer[0])\n            }\n            if (pointer[1] >= initPoint[1]) {\n              addingRect.attr('height', pointer[1] - initPoint[1])\n            } else {\n              addingRect.attr('y', pointer[1]).attr('height', initPoint[1] - pointer[1])\n            }\n          }\n        })\n        .on('mouseout.overlay', function () {\n          d3.selectAll('.cross_line').style('display', 'none')\n        })\n      if (cpnt.editingMode) this.enableEditingMode()\n    },\n    setRegions: function (data, animation, scale) {\n      let cpnt = this,\n        _g = d3.select('#g_'),\n        imgWrapper = cpnt.img.parentElement,\n        validRegions = [],\n        ic = 0,\n        currentRg,\n        colorFn\n\n      if (scale) data = this.scaledRegions(data)\n\n      while (ic < data.length) {\n        currentRg = data[ic]\n        if (currentRg.length == 5) {\n          validRegions.push(currentRg)\n          if (currentRg[0] && this.labelSet.indexOf(currentRg[0]) == -1) this.labelSet.push(currentRg[0])\n        }\n        ic++\n      }\n      this.$emit('update-labels', this.labelSet)\n      colorFn = this.getColorFn(this.labelSet)\n\n      // Image regions\n      let regs = _g.selectAll('rect.region').classed('new', false).data(validRegions)\n      regs\n        .enter()\n        .append('rect')\n        .classed('new', true)\n        .merge(regs)\n        .attr('index', function (_, i) {\n          return i\n        })\n        .attr('data-label', function (d) {\n          return d[0] || cpnt.selectedLabel\n        })\n        .classed('region', true)\n        .classed('adding', function (d) {\n          return !d[0]\n        })\n        .attr('stroke', function (d) {\n          return colorFn(d[0] || cpnt.selectedLabel)\n        })\n        .attr('fill', function (d) {\n          return colorFn(d[0] || cpnt.selectedLabel)\n        })\n        .attr('stroke-width', '2px')\n        .attr('fill-opacity', 0.2)\n        .attr('x', function (d) {\n          return (d[1] + d[3]) / 2\n        })\n        .attr('y', function (d) {\n          return (d[2] + d[4]) / 2\n        })\n        .style('display', function (d) {\n          return cpnt.hiddenLabels.indexOf(d[0]) == -1 ? 'block' : 'none'\n        })\n        .call(\n          d3\n            .drag()\n            .on('drag', function (event) {\n              dragged(event, d3.select(this), cpnt)\n            })\n            .on('end', function () {\n              updateBirdData(cpnt)\n            })\n        )\n        .transition()\n        .duration(function () {\n          if (animation && d3.select(this).classed('new') && !d3.select(this).classed('adding')) return 400\n          return 0\n        })\n        .attr('x', function (d) {\n          return d[1]\n        })\n        .attr('y', function (d) {\n          return d[2]\n        })\n        .attr('width', function (d) {\n          return d[3] - d[1]\n        })\n        .attr('height', function (d) {\n          return d[4] - d[2]\n        })\n        .on('end', function () {\n          // Image zoom\n          d3.select(imgWrapper.parentElement).call(zoom(cpnt, imgWrapper)).on('dblclick.zoom', null)\n          updateRegionElements(d3.select(this), cpnt)\n        })\n      regs.exit().remove()\n\n      // Image region labels\n      let rglabels = _g.selectAll('text.region_label').classed('new', false).data(validRegions)\n      rglabels\n        .enter()\n        .append('text')\n        .classed('new', true)\n        .merge(rglabels)\n        .attr('index', function (_, i) {\n          return i\n        })\n        .classed('region_label', true)\n        .classed('adding', function (d) {\n          return !d[0]\n        })\n        .on('dblclick', function () {\n          if (!cpnt.regionEvents) return false\n          let idx = d3.select(this).attr('index'),\n            bck = imgWrapper.querySelectorAll('rect.region_label_background[index=\"' + idx + '\"]')\n          cpnt.unclickLabels()\n          d3.selectAll(bck).classed('clicked', true)\n          cpnt.$emit(\n            'set-alert-message',\n            'You are <strong>editing a region label</strong>, type a new label or select one to change it.',\n            'info'\n          )\n        })\n        .style('font-size', '0.98em')\n        .style('stroke', 'rgb(255, 255, 255)')\n        .style('color', 'rgb(255, 255, 255)')\n        .style('fill', 'rgb(255, 255, 255)')\n        .style('stroke-width', 0)\n        .style('opacity', function () {\n          return d3.select(this).classed('new') ? 0 : 1\n        })\n      rglabels.exit().remove()\n      let lbBackgrounds = _g.selectAll('rect.region_label_background').classed('new', false).data(validRegions)\n      lbBackgrounds\n        .enter()\n        .append('rect')\n        .classed('new', true)\n        .merge(lbBackgrounds)\n        .attr('index', function (_, i) {\n          return i\n        })\n        .classed('region_label_background', true)\n        .classed('adding', function (d) {\n          return !d[0]\n        })\n        .attr('stroke', 'rgb(255, 255, 255)')\n        .attr('stroke-width', 1)\n        .attr('fill', 'rgb(0, 0, 0)')\n        .on('dblclick', function () {\n          if (!cpnt.regionEvents) return false\n          cpnt.unclickLabels()\n          d3.select(this).classed('clicked', true)\n          cpnt.$emit(\n            'set-alert-message',\n            'You are <strong>editing a region label</strong>, type a new label or select one to change it.',\n            'info'\n          )\n        })\n        .style('opacity', function (d) {\n          return d3.select(this).classed('new') || !d[0] ? 0 : 1\n        })\n      lbBackgrounds.exit().remove()\n\n      // Init zoom when there are not regions\n      if (!validRegions.length) {\n        d3.select(imgWrapper.parentElement).call(zoom(cpnt, imgWrapper)).on('dblclick.zoom', null)\n      }\n    },\n    getRegions: function () {\n      let rgs = d3.selectAll('rect.region').data(),\n        originalRegions = [],\n        scl = originScale(this),\n        idx = 0\n      while (idx < rgs.length) {\n        originalRegions.push([\n          rgs[idx][0],\n          scl.x(rgs[idx][1]),\n          scl.y(rgs[idx][2]),\n          scl.x(rgs[idx][3]),\n          scl.y(rgs[idx][4])\n        ])\n        idx++\n      }\n      return originalRegions\n    },\n    scaledRegions: function (rgs) {\n      let scl = containerScale(this),\n        scaledRgs = [],\n        idx = 0\n      while (idx < rgs.length) {\n        scaledRgs.push([rgs[idx][0], scl.x(rgs[idx][1]), scl.y(rgs[idx][2]), scl.x(rgs[idx][3]), scl.y(rgs[idx][4])])\n        idx++\n      }\n      return scaledRgs\n    },\n    removeAllRegions: function () {\n      d3.selectAll('.delete_region_wrapper,.resize').remove()\n      this.setRegions([])\n      updateBirdData(this)\n    },\n    removeAddingRegion: function () {\n      d3.select('rect.region.adding').remove()\n      d3.select('text.region_label.adding').remove()\n      d3.select('rect.region_label_background.adding').remove()\n    },\n    addNewRegion: function () {\n      if (!d3.select('rect.region.adding').empty() || !initPoint) return false\n      if (!this.selectedLabel) {\n        this.$emit('set-alert-message', '<strong>Type or select a label first</strong> to draw a region', 'info')\n        return false\n      }\n\n      let x = initPoint[0],\n        y = initPoint[1]\n\n      if (this.labelSet.indexOf(this.selectedLabel) == -1) this.labelSet.push(this.selectedLabel)\n      if (x > this.imgWidth || y > this.imgHeight) return false\n      if (d3.selectAll('rect.region').size() >= REGIONS_ALLOWED) {\n        this.$emit(\n          'set-alert-message',\n          'Please, use the BigML API to add <strong>more than ' + REGIONS_ALLOWED + ' regions</strong>.',\n          'warning'\n        )\n        return false\n      }\n\n      let data = d3.selectAll('rect.region').data()\n      data.push(['', x, y, x, y])\n      this.setRegions(data)\n    },\n    finishRegion: function () {\n      let addingRect = d3.select('rect.region.adding'),\n        addingText = d3.select('text.region_label.adding'),\n        addingBg = d3.select('rect.region_label_background.adding'),\n        newRegion = [\n          addingRect.attr('data-label') || this.selectedLabel,\n          parseInt(addingRect.attr('x')),\n          parseInt(addingRect.attr('y')),\n          parseInt(addingRect.attr('width')) + parseInt(addingRect.attr('x')),\n          parseInt(addingRect.attr('height')) + parseInt(addingRect.attr('y'))\n        ]\n\n      initPoint = null\n      if (newRegion[3] == newRegion[1] || newRegion[4] == newRegion[2]) {\n        addingRect.remove()\n        addingText.remove()\n        addingBg.remove()\n        updateRegionElements(addingRect, this)\n        this.$emit('set-alert-message', 'The region has to have <strong>some width and height</strong>', 'info')\n        return false\n      }\n\n      addingRect.data([newRegion]).classed('adding', false)\n      addingText.data([newRegion]).classed('adding', false)\n      addingBg.data([newRegion]).classed('adding', false)\n\n      updateRegionElements(addingRect, this)\n      updateBirdData(this)\n    },\n    updateClickedLabel(lb) {\n      let d3Clicked = d3.select('rect.region_label_background.clicked')\n      if (!this.regionEvents || !lb || d3Clicked.empty()) return false\n\n      let imgWrapper = this.img.parentElement,\n        idx = d3Clicked.attr('index'),\n        d3Rect = d3.selectAll(imgWrapper.querySelectorAll('rect.region[index=\"' + idx + '\"]')),\n        d3Text = d3.selectAll(imgWrapper.querySelectorAll('text.region_label[index=\"' + idx + '\"]')),\n        d3Back = d3.selectAll(imgWrapper.querySelectorAll('rect.region_label_background[index=\"' + idx + '\"]')),\n        rgD3 = d3Rect.data(),\n        newData,\n        colorFn\n      if (rgD3 && rgD3.length) {\n        colorFn = this.getColorFn(this.labelSet)\n        newData = [lb, rgD3[0][1], rgD3[0][2], rgD3[0][3], rgD3[0][4]]\n        d3Rect\n          .data([newData])\n          .attr('fill', function () {\n            return colorFn(lb)\n          })\n          .attr('stroke', function () {\n            return colorFn(lb)\n          })\n          .attr('fill', function () {\n            return colorFn(lb)\n          })\n        d3Text.data([newData])\n        d3Back.data([newData])\n        updateRegionElements(d3Rect, this)\n        updateBirdData(this)\n      }\n      this.unclickLabels()\n    },\n    unclickLabels: function () {\n      let clicked = d3.selectAll('.clicked')\n      if (!clicked.empty()) {\n        clicked.classed('clicked', false)\n        this.$emit('hide-alert-message')\n      }\n    },\n    onClickOutside: function () {\n      if (this.raw && !d3.select('rect.region.adding').empty()) {\n        this.finishRegion()\n      }\n    },\n    removeRegionByIndex(idx) {\n      let imgWrapper = this.img.parentElement\n      d3.selectAll(imgWrapper.querySelectorAll('[index=\"' + idx + '\"]')).remove()\n      updateBirdData(this)\n    },\n    removeRegionByLabel(lb) {\n      let imgWrapper = this.img.parentElement,\n        indexesToRemove = [],\n        ir = 0\n      d3.selectAll('rect.region').each(function (d) {\n        if (d.length == 5 && d[0] == lb) indexesToRemove.push(d3.select(this).attr('index'))\n      })\n      while (ir < indexesToRemove.length) {\n        d3.selectAll(imgWrapper.querySelectorAll('[index=\"' + indexesToRemove[ir] + '\"]')).remove()\n        ir++\n      }\n      updateBirdData(this)\n    },\n    removeLastRegion() {\n      if (d3.selectAll('rect.region').empty()) return false\n      let idx = 0\n      d3.selectAll('rect.region').each(function () {\n        if (parseInt(d3.select(this).attr('index')) > idx) {\n          idx = parseInt(d3.select(this).attr('index'))\n        }\n      })\n      this.removeRegionByIndex(idx)\n    },\n    displayLabels: function () {\n      let cpnt = this\n      d3.selectAll('.region_label,.region_label_background').style('display', function (d) {\n        return cpnt.showRegions || cpnt.hiddenLabels.indexOf(d[0]) == -1 ? 'block' : 'none'\n      })\n    },\n    hideLabels: function () {\n      d3.selectAll('.region_label,.region_label_background').style('display', 'none')\n    },\n    displayAllRegions: function () {\n      d3.selectAll('rect.region').style('display', 'block')\n      if (this.showLabels) {\n        d3.selectAll('text.region_label,rect.region_label_background').style('display', 'block')\n      }\n      if (this.editingMode) {\n        d3.selectAll('rect.resize,.delete_region_wrapper').style('display', 'block')\n      }\n    },\n    hideAllRegions: function () {\n      d3.selectAll(\n        'text.region_label,rect.region,rect.resize,rect.region_label_background,.delete_region_wrapper'\n      ).style('display', 'none')\n    },\n    enableEditingMode: function (update) {\n      let cpnt = this,\n        _g = d3.select('#g_'),\n        idx\n\n      _g.selectAll('rect.region').each(function () {\n        idx = d3.select(this).attr('index')\n        d3.select(this).moveToFront()\n        // rects to resize the region\n        _g.append('rect')\n          .attr('stroke-width', 2)\n          .attr('stroke', '#333333')\n          .attr('fill', 'white')\n          .attr('index', idx)\n          .classed('resize top_left', true)\n        _g.append('rect')\n          .attr('stroke-width', 2)\n          .attr('stroke', '#333333')\n          .attr('fill', 'white')\n          .attr('index', idx)\n          .classed('resize top_right', true)\n        _g.append('rect')\n          .attr('stroke-width', 2)\n          .attr('stroke', '#333333')\n          .attr('fill', 'white')\n          .attr('index', idx)\n          .classed('resize bottom_right', true)\n        _g.append('rect')\n          .attr('stroke-width', 2)\n          .attr('stroke', '#333333')\n          .attr('fill', 'white')\n          .attr('index', idx)\n          .classed('resize bottom_left', true)\n        // icon to remove the region\n        _g.append('svg:foreignObject')\n          .attr('index', idx)\n          .attr('class', 'delete_region_wrapper')\n          .on('mousedown', function () {\n            cpnt.removeRegionByIndex(d3.select(this).attr('index'))\n          })\n          .append('xhtml:i')\n          .attr('class', 'delete_region')\n        if (update) updateRegionElements(d3.select(this), cpnt)\n      })\n      _g.selectAll('rect.resize').call(\n        d3\n          .drag()\n          .on('drag', function (event) {\n            resized(event, this, cpnt)\n          })\n          .on('end', function () {\n            updateBirdData(cpnt)\n          })\n      )\n    },\n    disableEditingMode: function () {\n      let _g = d3.select('#g_')\n      _g.select('rect.overlay').moveToFront()\n      _g.selectAll('.region_label_background,.region_label').moveToFront()\n      _g.selectAll('rect.resize,.delete_region_wrapper').remove()\n    },\n    getColorFn: function (labels) {\n      return d3.scaleOrdinal().range(d3u.CATEGORY_COLORS).domain(labels)\n    },\n    setActualSize: function () {\n      if (!this.isLoaded) return false\n      let cpnt = this,\n        imgWrapper = this.img.parentElement\n      d3.select(imgWrapper.parentElement).call(\n        zoom(cpnt, imgWrapper).transform,\n        d3.zoomIdentity.translate(cpnt.transform['x'], cpnt.transform['y']).scale(cpnt.actualSize)\n      )\n      this.$emit('set-zoom', cpnt.actualSize)\n    },\n    resetRegions: function () {\n      d3.selectAll('.delete_region_wrapper,.resize').remove()\n      this.setRegions(this.bird.regions || [], true, true)\n      if (this.editingMode) this.enableEditingMode()\n    },\n    resetZoom: function () {\n      if (!this.img) return false\n      let imgWrapper = this.img.parentElement\n      this.transform = { k: DEFAULT_ZOOM, x: 0, y: 0 }\n      d3.select(imgWrapper.parentElement).call(\n        zoom(this, imgWrapper).transform,\n        d3.zoomIdentity.translate(this.transform['x'], this.transform['y']).scale(DEFAULT_ZOOM)\n      )\n      this.$emit('set-zoom', DEFAULT_ZOOM)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bird.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bird.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bird.vue?vue&type=template&id=173bc92c&\"\nimport script from \"./Bird.vue?vue&type=script&lang=js&\"\nexport * from \"./Bird.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VIcon})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport ClickOutside from 'vuetify/lib/directives/click-outside'\ninstallDirectives(component, {ClickOutside})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"value\":_vm.dialog,\"fullscreen\":\"\",\"persistent\":\"\",\"hide-overlay\":\"\",\"transition\":\"dialog-bottom-transition\",\"content-class\":\"image_dialog\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"secondary\"}},[_c('v-btn',{attrs:{\"icon\":\"\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.closeModal()}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-toolbar-title',[_vm._v(\"Image regions\")]),_c('v-spacer'),_c('v-toolbar-items',[_c('v-btn',{attrs:{\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){return _vm.closeModal()}}},[_vm._v(\"Close\")])],1)],1),(_vm.regionEvents)?_c('v-subheader',{style:({ height: '70px' })},[_vm._v(\" To draw your first region type a label, click the start point on the image, move and click the end point to finish. \")]):_vm._e(),_c('v-alert',{staticClass:\"message mt-4\",attrs:{\"dismissible\":\"\",\"dense\":\"\",\"type\":_vm.alertMessageType},model:{value:(_vm.alert),callback:function ($$v) {_vm.alert=$$v},expression:\"alert\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.alertMessage)}})]),_c('v-divider'),_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"md\":_vm.imgLoaded && _vm.regionEvents ? 8 : 12}},[(_vm.bird)?_c('bird',{key:_vm.bird.url,ref:\"birdComponent\",attrs:{\"bird\":_vm.bird,\"raw\":true,\"region-events\":_vm.regionEvents,\"expanded\":true,\"img-style\":_vm.imgStyle,\"zoom\":_vm.zoom,\"labels\":_vm.labels,\"hidden-labels\":_vm.hiddenLabels,\"selected-label\":_vm.selectedLabel,\"show-labels\":_vm.showLabels,\"show-regions\":_vm.showRegions,\"editing-mode\":_vm.editingMode},on:{\"update-labels\":function($event){return _vm.$emit('update-labels', $event)},\"update-bird\":function($event){return _vm.$emit('update-bird', $event)},\"update-hidden-labels\":_vm.updateHiddenLabels,\"image-loaded\":function($event){_vm.imgLoaded = true},\"set-alert-message\":_vm.setAlertMessage,\"hide-alert-message\":function($event){_vm.alert = false},\"set-zoom\":_vm.setZoom,\"set-show-labels\":_vm.setShowLabels,\"set-show-regions\":_vm.setShowRegions,\"set-editing\":_vm.setEditing}}):_vm._e(),(_vm.imgLoaded)?_c('v-pagination',{attrs:{\"length\":_vm.birdLength,\"total-visible\":5,\"color\":\"secondary\"},model:{value:(_vm.imgPage),callback:function ($$v) {_vm.imgPage=$$v},expression:\"imgPage\"}}):_vm._e(),(_vm.imgLoaded)?_c('div',{staticClass:\"buttons_img\"},[_c('div',{staticClass:\"group_ico\"},[_c('span',{staticClass:\"zoom_value value\"},[_vm._v(\"Ratio: \"+_vm._s(_vm.zoom))]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",class:{ active: _vm.actualSizeActive },attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.$refs.birdComponent.setActualSize()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-actual-size\")])],1)]}}],null,false,6620018)},[_c('span',[_vm._v(\"Actual size (SHIFT+G)\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",class:{ active: _vm.resetZoomActive },attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.$refs.birdComponent.resetZoom()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-reset-zoom\")])],1)]}}],null,false,1605496185)},[_c('span',[_vm._v(\"Fit window (SHIFT+F)\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.decreaseZoom()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-magnify-minus\")])],1)]}}],null,false,2943131521)},[_c('span',[_vm._v(\"Zoom out (SHIFT+O)\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.increaseZoom()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-magnify-plus\")])],1)]}}],null,false,226338737)},[_c('span',[_vm._v(\"Zoom in (SHIFT+I)\")])])],1),_c('div',{staticClass:\"group_ico\"},[_c('span',{staticClass:\"brightness_value value\"},[_vm._v(_vm._s(_vm.brightness)+\"%\")]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.decreaseBrightness()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-brightness-minus\")])],1)]}}],null,false,2362037285)},[_c('span',[_vm._v(\"Decrease brightness (SHIFT+A)\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.increaseBrightness()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-brightness-plus\")])],1)]}}],null,false,3662323733)},[_c('span',[_vm._v(\"Increase brightness (SHIFT+S)\")])])],1),_c('div',{staticClass:\"group_ico\"},[_c('span',{staticClass:\"contrast_value value\"},[_vm._v(_vm._s(_vm.contrast)+\"%\")]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.decreaseContrast()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-contrast-minus\")])],1)]}}],null,false,1391011525)},[_c('span',[_vm._v(\"Increase contrast (SHIFT+X)\")])]),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.increaseContrast()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-contrast-plus\")])],1)]}}],null,false,1793588149)},[_c('span',[_vm._v(\"Increase contrast (SHIFT+C)\")])])],1),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ico\",attrs:{\"color\":\"white\",\"small\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.resetImage()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-reload\")])],1)]}}],null,false,702739909)},[_c('span',[_vm._v(\"Reset image (SHIFT+R)\")])])],1):_vm._e()],1),(_vm.imgLoaded && _vm.regionEvents)?_c('v-col',{staticClass:\"pa-md-4\",attrs:{\"md\":\"4\"}},[_c('v-text-field',{staticClass:\"float-left ml-4 mt-4\",style:({ width: '70%' }),attrs:{\"placeholder\":\"Type your label\",\"outlined\":\"\"},on:{\"change\":function($event){return _vm.addNewLabel($event)},\"focus\":function($event){_vm.inputFocused = true},\"blur\":function($event){_vm.inputFocused = false}},model:{value:(_vm.selectedLabel),callback:function ($$v) {_vm.selectedLabel=$$v},expression:\"selectedLabel\"}}),_c('v-btn',{staticClass:\"mt-6\",attrs:{\"icon\":\"\",\"outlined\":\"\"},on:{\"click\":function($event){_vm.selectedLabel = ''}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-switch',{staticClass:\"d-block ml-4\",attrs:{\"color\":\"secondary\",\"label\":_vm.showLabels ? 'Hide region labels' : 'Show region labels'},model:{value:(_vm.showLabels),callback:function ($$v) {_vm.showLabels=$$v},expression:\"showLabels\"}}),_c('v-switch',{staticClass:\"d-block ml-4\",attrs:{\"color\":\"secondary\",\"label\":_vm.showRegions ? 'Hide all regions' : 'Show all regions'},on:{\"change\":function($event){return _vm.setShowRegions($event)}},model:{value:(_vm.showRegions),callback:function ($$v) {_vm.showRegions=$$v},expression:\"showRegions\"}}),_c('v-switch',{staticClass:\"d-block ml-4\",attrs:{\"color\":\"secondary\",\"label\":_vm.editingMode ? 'Disable editing mode' : 'Enable editing mode'},model:{value:(_vm.editingMode),callback:function ($$v) {_vm.editingMode=$$v},expression:\"editingMode\"}}),_c('v-tooltip',{attrs:{\"left\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"ma-auto mb-4 d-block\",attrs:{\"icon\":\"\",\"outlined\":\"\"},on:{\"click\":function($event){return _vm.$refs.birdComponent.removeAllRegions()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-delete\")])],1)]}}],null,false,4179817773)},[_c('span',[_vm._v(\"Remove all regions (CTRL+SHIFT+D)\")])]),_c('v-divider'),_c('v-list',{staticClass:\"labels overflow-y-auto\",style:({ maxHeight: '28%' }),attrs:{\"rounded\":\"\"}},[_c('v-list-item-group',{attrs:{\"color\":\"secondary\"},model:{value:(_vm.selectedItem),callback:function ($$v) {_vm.selectedItem=$$v},expression:\"selectedItem\"}},_vm._l((_vm.labels),function(item,idx){return _c('v-list-item',{key:'label_' + item,staticClass:\"d-inline-block mr-1\",style:(_vm.labelColor(item))},[_c('v-list-item-content',{staticClass:\"d-inline-block\"},[_c('v-list-item-title',{staticClass:\"d-inline-block label_wrapper\",domProps:{\"innerHTML\":_vm._s(_vm.labelContent(item, idx))}})],1),_c('v-hover',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar hover = ref.hover;\nreturn [_c('v-list-item-action',{staticClass:\"float-right mt-3\",on:{\"click\":function($event){$event.stopPropagation();return _vm.clickListIcon(item)}}},[_c('v-icon',{attrs:{\"small\":\"\",\"color\":hover ? (_vm.showRegions ? 'red' : 'green') : ''}},[_vm._v(\" \"+_vm._s(_vm.showRegions ? 'mdi-close' : _vm.hiddenLabels.indexOf(item) >= 0 ? 'mdi-eye-off' : 'mdi-eye')+\" \")])],1)]}}],null,true)})],1)}),1)],1)],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog\n    :value=\"dialog\"\n    fullscreen\n    persistent\n    hide-overlay\n    transition=\"dialog-bottom-transition\"\n    content-class=\"image_dialog\"\n  >\n    <v-card>\n      <v-toolbar dark color=\"secondary\">\n        <v-btn icon dark @click=\"closeModal()\">\n          <v-icon>mdi-close</v-icon>\n        </v-btn>\n        <v-toolbar-title>Image regions</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-toolbar-items>\n          <v-btn dark text @click=\"closeModal()\">Close</v-btn>\n        </v-toolbar-items>\n      </v-toolbar>\n      <v-subheader :style=\"{ height: '70px' }\" v-if=\"regionEvents\">\n        To draw your first region type a label, click the start point on the image, move and click the end point to\n        finish.\n      </v-subheader>\n      <v-alert v-model=\"alert\" dismissible dense :type=\"alertMessageType\" class=\"message mt-4\">\n        <span v-html=\"alertMessage\"></span>\n      </v-alert>\n      <v-divider></v-divider>\n      <v-row dense>\n        <v-col :md=\"imgLoaded && regionEvents ? 8 : 12\">\n          <bird\n            ref=\"birdComponent\"\n            :key=\"bird.url\"\n            :bird=\"bird\"\n            :raw=\"true\"\n            :region-events=\"regionEvents\"\n            :expanded=\"true\"\n            :img-style=\"imgStyle\"\n            :zoom=\"zoom\"\n            :labels=\"labels\"\n            :hidden-labels=\"hiddenLabels\"\n            :selected-label=\"selectedLabel\"\n            :show-labels=\"showLabels\"\n            :show-regions=\"showRegions\"\n            :editing-mode=\"editingMode\"\n            @update-labels=\"$emit('update-labels', $event)\"\n            @update-bird=\"$emit('update-bird', $event)\"\n            @update-hidden-labels=\"updateHiddenLabels\"\n            @image-loaded=\"imgLoaded = true\"\n            @set-alert-message=\"setAlertMessage\"\n            @hide-alert-message=\"alert = false\"\n            @set-zoom=\"setZoom\"\n            @set-show-labels=\"setShowLabels\"\n            @set-show-regions=\"setShowRegions\"\n            @set-editing=\"setEditing\"\n            v-if=\"bird\"\n          />\n          <v-pagination v-model=\"imgPage\" :length=\"birdLength\" :total-visible=\"5\" color=\"secondary\" v-if=\"imgLoaded\">\n          </v-pagination>\n          <div class=\"buttons_img\" v-if=\"imgLoaded\">\n            <div class=\"group_ico\">\n              <span class=\"zoom_value value\">Ratio: {{ zoom }}</span>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    color=\"white\"\n                    class=\"ico\"\n                    small\n                    :class=\"{ active: actualSizeActive }\"\n                    icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                    @click=\"$refs.birdComponent.setActualSize()\"\n                  >\n                    <v-icon>mdi-actual-size</v-icon>\n                  </v-btn>\n                </template>\n                <span>Actual size (SHIFT+G)</span>\n              </v-tooltip>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn\n                    color=\"white\"\n                    class=\"ico\"\n                    small\n                    :class=\"{ active: resetZoomActive }\"\n                    icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                    @click=\"$refs.birdComponent.resetZoom()\"\n                  >\n                    <v-icon>mdi-reset-zoom</v-icon>\n                  </v-btn>\n                </template>\n                <span>Fit window (SHIFT+F)</span>\n              </v-tooltip>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn color=\"white\" class=\"ico\" small icon v-bind=\"attrs\" v-on=\"on\" @click=\"decreaseZoom()\">\n                    <v-icon>mdi-magnify-minus</v-icon>\n                  </v-btn>\n                </template>\n                <span>Zoom out (SHIFT+O)</span>\n              </v-tooltip>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn color=\"white\" class=\"ico\" small icon v-bind=\"attrs\" v-on=\"on\" @click=\"increaseZoom()\">\n                    <v-icon>mdi-magnify-plus</v-icon>\n                  </v-btn>\n                </template>\n                <span>Zoom in (SHIFT+I)</span>\n              </v-tooltip>\n            </div>\n            <div class=\"group_ico\">\n              <span class=\"brightness_value value\">{{ brightness }}%</span>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn color=\"white\" class=\"ico\" small icon v-bind=\"attrs\" v-on=\"on\" @click=\"decreaseBrightness()\">\n                    <v-icon>mdi-brightness-minus</v-icon>\n                  </v-btn>\n                </template>\n                <span>Decrease brightness (SHIFT+A)</span>\n              </v-tooltip>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn color=\"white\" class=\"ico\" small icon v-bind=\"attrs\" v-on=\"on\" @click=\"increaseBrightness()\">\n                    <v-icon>mdi-brightness-plus</v-icon>\n                  </v-btn>\n                </template>\n                <span>Increase brightness (SHIFT+S)</span>\n              </v-tooltip>\n            </div>\n            <div class=\"group_ico\">\n              <span class=\"contrast_value value\">{{ contrast }}%</span>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn color=\"white\" class=\"ico\" small icon v-bind=\"attrs\" v-on=\"on\" @click=\"decreaseContrast()\">\n                    <v-icon>mdi-contrast-minus</v-icon>\n                  </v-btn>\n                </template>\n                <span>Increase contrast (SHIFT+X)</span>\n              </v-tooltip>\n              <v-tooltip top>\n                <template #activator=\"{ on, attrs }\">\n                  <v-btn color=\"white\" class=\"ico\" small icon v-bind=\"attrs\" v-on=\"on\" @click=\"increaseContrast()\">\n                    <v-icon>mdi-contrast-plus</v-icon>\n                  </v-btn>\n                </template>\n                <span>Increase contrast (SHIFT+C)</span>\n              </v-tooltip>\n            </div>\n            <v-tooltip top>\n              <template #activator=\"{ on, attrs }\">\n                <v-btn color=\"white\" class=\"ico\" small icon v-bind=\"attrs\" v-on=\"on\" @click=\"resetImage()\">\n                  <v-icon>mdi-reload</v-icon>\n                </v-btn>\n              </template>\n              <span>Reset image (SHIFT+R)</span>\n            </v-tooltip>\n          </div>\n        </v-col>\n        <v-col md=\"4\" class=\"pa-md-4\" v-if=\"imgLoaded && regionEvents\">\n          <v-text-field\n            v-model=\"selectedLabel\"\n            placeholder=\"Type your label\"\n            outlined\n            class=\"float-left ml-4 mt-4\"\n            :style=\"{ width: '70%' }\"\n            @change=\"addNewLabel($event)\"\n            @focus=\"inputFocused = true\"\n            @blur=\"inputFocused = false\"\n          ></v-text-field>\n          <v-btn class=\"mt-6\" icon outlined @click=\"selectedLabel = ''\"><v-icon>mdi-close</v-icon></v-btn>\n          <v-switch\n            v-model=\"showLabels\"\n            class=\"d-block ml-4\"\n            color=\"secondary\"\n            :label=\"showLabels ? 'Hide region labels' : 'Show region labels'\"\n          >\n          </v-switch>\n          <v-switch\n            v-model=\"showRegions\"\n            class=\"d-block ml-4\"\n            color=\"secondary\"\n            :label=\"showRegions ? 'Hide all regions' : 'Show all regions'\"\n            @change=\"setShowRegions($event)\"\n          >\n          </v-switch>\n          <v-switch\n            v-model=\"editingMode\"\n            class=\"d-block ml-4\"\n            color=\"secondary\"\n            :label=\"editingMode ? 'Disable editing mode' : 'Enable editing mode'\"\n          >\n          </v-switch>\n          <v-tooltip left>\n            <template #activator=\"{ on, attrs }\">\n              <v-btn\n                class=\"ma-auto mb-4 d-block\"\n                icon\n                outlined\n                v-bind=\"attrs\"\n                v-on=\"on\"\n                @click=\"$refs.birdComponent.removeAllRegions()\"\n              >\n                <v-icon>mdi-delete</v-icon>\n              </v-btn>\n            </template>\n            <span>Remove all regions (CTRL+SHIFT+D)</span>\n          </v-tooltip>\n          <v-divider></v-divider>\n          <v-list rounded class=\"labels overflow-y-auto\" :style=\"{ maxHeight: '28%' }\">\n            <v-list-item-group v-model=\"selectedItem\" color=\"secondary\">\n              <v-list-item\n                :key=\"'label_' + item\"\n                :style=\"labelColor(item)\"\n                class=\"d-inline-block mr-1\"\n                v-for=\"(item, idx) in labels\"\n              >\n                <v-list-item-content class=\"d-inline-block\">\n                  <v-list-item-title class=\"d-inline-block label_wrapper\" v-html=\"labelContent(item, idx)\">\n                  </v-list-item-title>\n                </v-list-item-content>\n                <v-hover v-slot=\"{ hover }\">\n                  <v-list-item-action class=\"float-right mt-3\" @click.stop=\"clickListIcon(item)\">\n                    <v-icon small :color=\"hover ? (showRegions ? 'red' : 'green') : ''\">\n                      {{ showRegions ? 'mdi-close' : hiddenLabels.indexOf(item) >= 0 ? 'mdi-eye-off' : 'mdi-eye' }}\n                    </v-icon>\n                  </v-list-item-action>\n                </v-hover>\n              </v-list-item>\n            </v-list-item-group>\n          </v-list>\n        </v-col>\n      </v-row>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport Bird from './Bird.vue'\nimport _ from 'lodash'\n\nconst DEFAULT_LUMINOSITY = 100\nconst DEFAULT_ZOOM = 1\nconst LUMINOSITY_STEP = 10\nconst LUMINOSITY_MAX = 300\nconst LUMINOSITY_MIN = 0\nconst ZOOM_STEP = 0.1\nconst ZOOM_MAX = 8\nconst ZOOM_MIN = 0.01\n\nexport default {\n  components: { bird: Bird },\n  props: {\n    dialog: Boolean,\n    regionEvents: Boolean,\n    bird: {\n      type: Object,\n      default: null\n    },\n    birdIndex: {\n      type: Number,\n      default: 0\n    },\n    birdLength: {\n      type: Number,\n      default: 0\n    },\n    labels: {\n      type: Array,\n      default: function () {\n        return []\n      }\n    }\n  },\n  data: function () {\n    return {\n      brightness: DEFAULT_LUMINOSITY,\n      contrast: DEFAULT_LUMINOSITY,\n      zoom: DEFAULT_ZOOM,\n      alert: false,\n      alertMessage: '',\n      alertMessageType: 'success',\n      selectedLabel: '',\n      hiddenLabels: [],\n      inputFocused: false,\n      showLabels: true,\n      showRegions: true,\n      editingMode: false,\n      imgLoaded: false\n    }\n  },\n  computed: {\n    imgStyle: function () {\n      return {\n        filter: 'brightness(' + this.brightness + '%) contrast(' + this.contrast + '%)'\n      }\n    },\n    labelStyle: function () {\n      return { overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }\n    },\n    actualSizeActive: function () {\n      return this.zoom == Math.round(this.$refs.birdComponent.actualSize * 100) / 100\n    },\n    resetZoomActive: function () {\n      let tr = this.$refs.birdComponent.transform\n      return this.zoom == DEFAULT_ZOOM && !tr.x && !tr.y\n    },\n    imgPage: {\n      get: function () {\n        return this.birdIndex + 1\n      },\n      set: function (page) {\n        this.$emit('set-bird', page - 1)\n      }\n    },\n    selectedItem: {\n      get: function () {\n        return this.labels.indexOf(this.selectedLabel) >= 0 ? this.labels.indexOf(this.selectedLabel) : null\n      },\n      set: function (idx) {\n        if (idx >= 0 && idx < this.labels.length) this.selectedLabel = this.labels[idx]\n        if (this.$refs.birdComponent) this.$refs.birdComponent.updateClickedLabel(this.selectedLabel)\n      }\n    }\n  },\n  created: function () {\n    let cpnt = this,\n      args = { lbIndex: '', lbTimeout: undefined }\n    window.addEventListener('keydown', function (event) {\n      cpnt.shortcuts(event, args)\n    })\n  },\n  destroyed: function () {\n    window.removeEventListener('keydown', this.shortcuts)\n  },\n  methods: {\n    setAlertMessage: function (msg, msgType) {\n      if (!msg) return false\n      this.alert = true\n      this.alertMessage = msg\n      this.alertMessageType = msgType || 'success'\n    },\n    closeModal: function () {\n      this.alert = false\n      this.alertMessage = ''\n      this.$emit('close-modal')\n    },\n    addNewLabel: function (newLabel) {\n      let labelSet = this.labels.slice()\n      if (newLabel && labelSet.indexOf(newLabel) == -1) {\n        labelSet.push(newLabel)\n        this.$emit('update-labels', labelSet)\n      }\n      if (this.$refs.birdComponent) this.$refs.birdComponent.updateClickedLabel(newLabel)\n    },\n    labelContent: function (item, idx) {\n      return '<span class=\"label_index\">[' + idx + ']</span><span>' + item + '</span>'\n    },\n    clickListIcon: function (lb) {\n      if (this.showRegions) {\n        this.$refs.birdComponent.removeRegionByLabel(lb)\n      } else if (this.hiddenLabels.indexOf(lb) >= 0) {\n        this.hiddenLabels.splice(this.hiddenLabels.indexOf(lb), 1)\n        this.selectedLabel = lb\n      } else {\n        this.hiddenLabels.push(lb)\n      }\n    },\n    updateHiddenLabels: function (lbs) {\n      if (lbs) this.hiddenLabels = lbs\n    },\n    labelColor: function (item) {\n      if (this.$refs.birdComponent) {\n        let colorFn = this.$refs.birdComponent.getColorFn(this.labels)\n        return { backgroundColor: colorFn(item) }\n      }\n    },\n    increaseZoom: function () {\n      this.zoom += ZOOM_STEP\n      if (this.zoom > ZOOM_MAX) this.zoom = ZOOM_MAX\n      this.zoom = Math.round(this.zoom * 100) / 100\n    },\n    increaseBrightness: function () {\n      this.brightness += LUMINOSITY_STEP\n      if (this.brightness > LUMINOSITY_MAX) this.brightness = LUMINOSITY_MAX\n    },\n    increaseContrast: function () {\n      this.contrast += LUMINOSITY_STEP\n      if (this.contrast > LUMINOSITY_MAX) this.contrast = LUMINOSITY_MAX\n    },\n    decreaseZoom: function () {\n      this.zoom -= ZOOM_STEP\n      if (this.zoom < ZOOM_MIN) this.zoom = ZOOM_MIN\n      this.zoom = Math.round(this.zoom * 100) / 100\n    },\n    decreaseBrightness: function () {\n      this.brightness -= LUMINOSITY_STEP\n      if (this.brightness < LUMINOSITY_MIN) this.brightness = LUMINOSITY_MIN\n    },\n    decreaseContrast: function () {\n      this.contrast -= LUMINOSITY_STEP\n      if (this.contrast < LUMINOSITY_MIN) this.contrast = LUMINOSITY_MIN\n    },\n    setShowLabels: function (val) {\n      this.showLabels = val\n    },\n    setShowRegions: function (val) {\n      this.hiddenLabels = val ? [] : _.cloneDeep(this.labels)\n      this.showRegions = val\n    },\n    setEditing: function (val) {\n      this.editingMode = val\n    },\n    setZoom: function (val) {\n      if (typeof val !== 'number' || val < ZOOM_MIN) val = ZOOM_MIN\n      if (val > ZOOM_MAX) val = ZOOM_MAX\n      this.zoom = Math.round(val * 100) / 100\n    },\n    shortcuts: function (event, args) {\n      if (!this.dialog || !this.imgLoaded || this.inputFocused) return false\n      let cpnt = this,\n        kcode = event.keyCode\n      if (event.shiftKey && event.ctrlKey) {\n        switch (kcode) {\n          // Remove all regions (ctrl+shift+d)\n          case 68:\n            if (this.$refs.birdComponent) {\n              this.$refs.birdComponent.removeAllRegions()\n            }\n            break\n        }\n      } else if (event.ctrlKey) {\n        switch (kcode) {\n          // Copy regions (ctrl+c)\n          case 67:\n            break\n          // Paste regions (ctrl+v)\n          case 86:\n            break\n        }\n      } else if (event.shiftKey) {\n        switch (kcode) {\n          // Decrease brightness (shift+a)\n          case 65:\n            this.decreaseBrightness()\n            break\n          // Increase contrast (shift+c)\n          case 67:\n            this.increaseContrast()\n            break\n          // Enable/disable region editor (shift+e)\n          case 69:\n            this.editingMode = !this.editingMode\n            break\n          // Fit window (shift+f)\n          case 70:\n            if (this.$refs.birdComponent) {\n              this.$refs.birdComponent.resetZoom()\n            }\n            break\n          // Actual size (shift+g)\n          case 71:\n            if (this.$refs.birdComponent) {\n              this.$refs.birdComponent.setActualSize()\n            }\n            break\n          // Hide/show regions (shift+h)\n          case 72:\n            this.showRegions = !this.showRegions\n            break\n          // Zoom in (shift+i)\n          case 73:\n            this.increaseZoom()\n            break\n          // Hide/show region labels (shift+l)\n          case 76:\n            this.showLabels = !this.showLabels\n            break\n          // Zoom out (shift+o)\n          case 79:\n            this.decreaseZoom()\n            break\n          // Reset image properties (shift+r)\n          case 82:\n            this.resetImage()\n            break\n          // Increase brightness (shift+s)\n          case 83:\n            this.increaseBrightness()\n            break\n          // Switch selected label (shift+t)\n          case 84:\n            if (this.selectedItem < this.labels.length - 1) {\n              this.selectedItem += 1\n            } else {\n              this.selectedItem = 0\n            }\n            break\n          // Decrease contrast (shift+x)\n          case 88:\n            this.decreaseContrast()\n            break\n        }\n      } else {\n        switch (kcode) {\n          // Remove last region (DELETE)\n          case 8:\n            if (this.$refs.birdComponent) {\n              let idx = this.labels.length - 1\n              this.$refs.birdComponent.removeLastRegion(idx)\n            }\n            break\n          // Remove adding region (ESC)\n          case 27:\n            if (this.$refs.birdComponent) {\n              this.$refs.birdComponent.removeAddingRegion()\n              this.$refs.birdComponent.unclickLabels()\n            }\n            break\n          // Next image (->, SPACE)\n          case 32:\n          case 39:\n            if (this.imgPage == this.birdLength) return false\n            this.imgPage += 1\n            break\n          // Previous image (<-)\n          case 37:\n            if (this.imgPage == 1) return false\n            this.imgPage -= 1\n            break\n        }\n        if (kcode >= 48 && kcode <= 57) {\n          args.lbIndex += String.fromCharCode(kcode)\n          clearTimeout(args.lbTimeout)\n          args.lbTimeout = setTimeout(function () {\n            let idx = parseInt(args.lbIndex)\n            if (idx < cpnt.labels.length) cpnt.selectedItem = idx\n            args.lbIndex = ''\n          }, 300)\n        }\n      }\n    },\n    resetImage: function () {\n      this.brightness = DEFAULT_LUMINOSITY\n      this.contrast = DEFAULT_LUMINOSITY\n      if (this.$refs.birdComponent) {\n        this.$refs.birdComponent.resetZoom()\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=7a462b33&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib/components/VAlert';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VHover } from 'vuetify/lib/components/VHover';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemGroup } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VPagination } from 'vuetify/lib/components/VPagination';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarItems } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\nimport { VTooltip } from 'vuetify/lib/components/VTooltip';\ninstallComponents(component, {VAlert,VBtn,VCard,VCol,VDialog,VDivider,VHover,VIcon,VList,VListItem,VListItemAction,VListItemContent,VListItemGroup,VListItemTitle,VPagination,VRow,VSpacer,VSubheader,VSwitch,VTextField,VToolbar,VToolbarItems,VToolbarTitle,VTooltip})\n","<template>\n  <div class=\"birds_wrapper mt-6 mb-6\">\n    <v-text-field\n      v-model=\"hash\"\n      label=\"BigML composite hash\"\n      outlined\n      :style=\"{ margin: '0 auto', width: '50%' }\"\n      readonly\n      @change=\"listBirds()\"\n    ></v-text-field>\n    <transition-group name=\"image-list\" class=\"birds\" appear v-if=\"birds.length\">\n      <bird :key=\"'grid_' + b.url\" :bird=\"b\" :bindex=\"index\" @open-modal=\"openModal\" v-for=\"(b, index) in birds\" />\n    </transition-group>\n    <div class=\"loading\" v-if=\"!birds.length && loadingMsg\">{{ loadingMsg }}</div>\n    <idialog\n      ref=\"idialog\"\n      :dialog=\"dialog\"\n      :region-events=\"regionEvents\"\n      :bird=\"selectedBird\"\n      :bird-index=\"birdIndex\"\n      :bird-length=\"birds.length\"\n      :labels=\"labels\"\n      @set-bird=\"setBird\"\n      @update-bird=\"updateBird\"\n      @close-modal=\"closeModal\"\n      @update-labels=\"updateLabels\"\n    />\n    <v-btn @click=\"shuffle(true)\" v-show=\"birds.length\">Shuffle</v-btn>\n  </div>\n</template>\n\n<script>\nimport Bird from './Bird.vue'\nimport ImageDialog from './Dialog.vue'\nimport _ from 'lodash'\nimport axios from 'axios'\n\nlet shuffleInterval\n\nexport default {\n  name: 'Birds',\n  components: {\n    bird: Bird,\n    idialog: ImageDialog\n  },\n  data: function () {\n    return {\n      birds: [],\n      labels: [],\n      hash: 'pHanYmhK2D3S2w3y0XnUJypyIl7',\n      selectedBird: null,\n      birdIndex: 0,\n      dialog: false,\n      regionEvents: true,\n      loadingMsg: ''\n    }\n  },\n  created: function () {\n    this.resetInterval()\n  },\n  mounted: function () {\n    this.listBirds()\n  },\n  methods: {\n    listBirds: function () {\n      let cpnt = this\n      this.birds = []\n      if (!this.hash) {\n        this.loadingMsg = ''\n        return false\n      }\n\n      this.loadingMsg = 'Loading...'\n      axios\n        .get(\n          'https://strato.dev.bigml.io/andromeda/shared/source/' + this.hash + '?exclude=sources;parent_optype=!image'\n        )\n        .then(function (response) {\n          let fields = response.data['fields'],\n            preview = response.data['fields_preview'],\n            idx = 0,\n            idxLb = 0,\n            ids = [],\n            rgs = [],\n            keys\n          if (preview) {\n            keys = Object.keys(preview)\n            while (idx < keys.length) {\n              if (fields[keys[idx]].optype == 'image') {\n                ids = preview[keys[idx]]\n              }\n              if (fields[keys[idx]].optype == 'regions') {\n                rgs = preview[keys[idx]]\n              }\n              idx++\n            }\n          }\n          if (ids) {\n            idx = 0\n            while (idx < ids.length) {\n              cpnt.birds.push({\n                url: 'https://strato.dev.bigml.com/shared/source/' + ids[idx] + '/image/source/' + cpnt.hash,\n                regions: rgs && rgs.length == ids.length ? rgs[idx] : []\n              })\n              idxLb = 0\n              if (rgs.length) {\n                while (idxLb < rgs[idx].length) {\n                  if (cpnt.labels.indexOf(rgs[idx][idxLb][0]) == -1) {\n                    cpnt.labels.push(rgs[idx][idxLb][0])\n                  }\n                  idxLb++\n                }\n              }\n              idx++\n            }\n            if (cpnt.labels.length) cpnt.$refs.idialog.selectedLabel = cpnt.labels[0]\n          }\n          cpnt.loadingMsg = cpnt.birds.length ? '' : 'There are no images'\n        })\n        .catch(function () {\n          cpnt.loadingMsg = 'An error happened retrieving the images...'\n        })\n    },\n    shuffle: function (reset) {\n      this.birds = _.shuffle(this.birds)\n      if (reset) this.resetInterval()\n    },\n    resetInterval: function () {\n      let cm = this\n      clearInterval(shuffleInterval)\n      shuffleInterval = setInterval(function () {\n        cm.shuffle()\n      }, 5000)\n    },\n    updateLabels: function (val) {\n      if (val) this.labels = val\n    },\n    setBird: function (idx) {\n      this.selectedBird = this.birds[idx]\n      this.birdIndex = idx\n      if (this.$refs.idialog.$refs.birdComponent) {\n        this.$refs.idialog.$refs.birdComponent.resetZoom()\n      }\n    },\n    updateBird: function (newBird) {\n      this.selectedBird = newBird\n      this.birds[this.birdIndex] = newBird\n    },\n    openModal: function (bird, idx, events) {\n      this.regionEvents = events || false\n      if (this.dialog) {\n        this.dialog = false\n        return false\n      }\n      if (bird) {\n        this.selectedBird = bird\n        this.birdIndex = idx\n      }\n      clearInterval(shuffleInterval)\n      this.dialog = true\n      if (this.$refs.idialog.$refs.birdComponent) {\n        this.$refs.idialog.resetImage()\n        this.$refs.idialog.$refs.birdComponent.resetRegions()\n      }\n    },\n    closeModal: function () {\n      let cpnt = this\n      this.dialog = false\n      this.resetInterval()\n      setTimeout(function () {\n        if (cpnt.dialog) return false\n        cpnt.selectedBird = null\n        cpnt.birdIndex = 0\n      }, 500)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Birds.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Birds.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Birds.vue?vue&type=template&id=09955ef8&\"\nimport script from \"./Birds.vue?vue&type=script&lang=js&\"\nexport * from \"./Birds.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VTextField})\n","<template>\n  <v-app class=\"app\">\n    <div class=\"header\">\n      <img alt=\"Vue logo\" src=\"./assets/logo.png\" class=\"logo\" />\n      <h2 class=\"mt-2\">{{ msg }}</h2>\n    </div>\n    <Birds></Birds>\n    <!-- <router-link to=\"/user/123456789\">Go to user (test)</router-link>\n    <router-view></router-view> -->\n    <div class=\"footer\">\n      <a class=\"bigml_link\" :href=\"bigmlUrl\" target=\"_blank\"><span></span></a>\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport Birds from './components/Birds.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Birds\n  },\n  data: function () {\n    return {\n      msg: 'Vue.js and bounding boxes with D3',\n      bigmlUrl: 'https://bigml.com'\n    }\n  }\n}\n</script>\n\n<style lang=\"sass\">\n@import './css/style.css'\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--11-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=08797b16&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\ninstallComponents(component, {VApp})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Page not found\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./NotFound.vue?vue&type=template&id=5ebd3d26&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"This user has 7 birds\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./UserBirds.vue?vue&type=template&id=ae9d3e26&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import NotFound from '../components/NotFound.vue'\nimport User from '../components/User.vue'\nimport UserBirds from '../components/UserBirds.vue'\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.use(VueRouter)\n\nconst routes = [\n  { path: '*', component: NotFound },\n  { path: '/user/:name', component: User, children: [{ path: 'birds', component: UserBirds }] }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  routes\n})\n\nexport default router\n","import 'vuetify/dist/vuetify.min.css'\nimport Vue from 'vue'\nimport Vuetify from 'vuetify/lib/framework'\n\nVue.use(Vuetify)\n\nconst opts = {}\n\nexport default new Vuetify(opts)\n","import App from './App.vue'\nimport Vue from 'vue'\nimport router from './router'\nimport vuetify from './plugins/vuetify'\n\nVue.config.productionTip = false\n\nnew Vue({\n  el: '#app',\n  vuetify,\n  router,\n  render: h => h(App)\n})\n","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=79a29d21&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","module.exports = \"data:image/png;base64,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7iVgTZHHGCTnYTHsOClmMTCshiRNIcYTWMyacJA0w05ugTihSwWLYacaSDNMDmLYlNNbsBh2hjSzGKJAdUHk2XMbsJg1/zyJhgkBk+3OreH9WBLs+4QiEg278D6Sd/Gh5PfYQDPhdgkqcNjmdPGSCVazZC+TaBaDo2Sqynvs4AoPqYZpVpngMOv9FFKbjWKXTHEYZZokSaJZSm04zLJ2m55PYo8i7IANVketrzy2jNSYDDPDZlZ8pvFRexJNArZI+7AmiONXyWmv87hhM8y2/yA5fZzz87EHfnIqSUUiBNRveX8tSc8ZMz7j7a6TGvwMPfNMb4gp37wVj2GazVpfUqOgqKAU1KhlP915eyJ6tN52v0OaYYxnqsDdD5+uy8dS76IZt8XfkTTTWG4iCqz2S+itlg3nSQs45J7M0nvo5eP9YpKjAQbYzxSgB5xqI7mGRT+InQE2Qn0N3LS7XWQaZvnwth24C7b9ESL05K+SZ9i0/vcbZOKABpztCESUH7cayDLMVd1mCv8loAFajIaIYJuoRWLqtfS6GXqMM3PLKWaGI9bvF9Qz9ExAmKZ+gaRsb79HVzbS9n2ChjawIKl9v1OZIf+xrfN7U2hK8XtCgllcPTULn8jJPC0H10VOJjMZGfKflbfY7Ii1fS+7wMbkfRIJ9TqXBzjlXhVKAzqyq0l2OrDTeZ+tulS8Z/J7teemLx7YPs0nOQKYLBkErTaIl244yJCv481l2GbENuHkKv2ZLDJ6OS9JNo2BgfvV+ZdKQiVddzyBlXOToFHwZYaVzQyKoQWv+Uk3DJIVjxa/AfZVFUUYGa6yMEzjA/ZN3r6rsSTdNIiR9sj5mxHEYe8g17ChCwAIlNLiKe09qQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0yNVQxNTowOTozMyswMDowMAI3LcMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMjVUMTU6MDk6MzMrMDA6MDBzapV/AAAARnRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA2LjcuOC05IDIwMTQtMDUtMTIgUTE2IGh0dHA6Ly93d3cuaW1hZ2VtYWdpY2sub3Jn3IbtAAAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABh0RVh0VGh1bWI6OkltYWdlOjpoZWlnaHQAMTkyDwByhQAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAxOTLTrCEIAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE2MTQyNjU3NzMcuy6PAAAAD3RFWHRUaHVtYjo6U2l6ZQAwQkKUoj7sAAAAVnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vbW50bG9nL2Zhdmljb25zLzIwMjEtMDItMjUvODFkYzlhZmZlZTdlM2ViNGQwMzJjOGFlM2I5ZjY1ZDUuaWNvLnBuZ3rO/74AAAAASUVORK5CYII=\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}